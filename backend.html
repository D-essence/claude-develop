<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>バックエンド開発 | AI駆動Web開発ポータル</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@300;400;500;700&family=Kosugi+Maru&family=Caveat&family=Fira+Code:wght@400;500&display=swap');
        
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #fca311;
            --info: #7209b7;
            --bg-light: #f8f9fa;
            --bg-dark: #343a40;
            --code-bg: #f5f5f5;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background-color: var(--bg-light);
            background-image: 
                radial-gradient(#e3e3e3 1px, transparent 1px),
                radial-gradient(#e3e3e3 1px, transparent 1px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            padding-bottom: 50px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 3px solid var(--primary);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--primary);
        }
        
        .logo h1 {
            font-family: 'Kosugi Maru', sans-serif;
            font-size: 1.8rem;
            margin-left: 10px;
        }
        
        .logo-icon {
            font-size: 2rem;
            color: var(--accent);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            position: relative;
            padding: 5px 0;
            transition: color 0.3s;
        }
        
        nav a:hover {
            color: var(--primary);
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary);
            transition: width 0.3s;
        }
        
        nav a:hover::after {
            width: 100%;
        }
        
        .page-header {
            background-color: white;
            padding: 60px 0;
            text-align: center;
            border-radius: 12px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%234361ee' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        .page-header h2 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .page-header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            color: #666;
        }
        
        .section {
            padding: 60px 0;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .section-header h2 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }
        
        .section-header h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background-color: var(--accent);
        }
        
        .section-header p {
            font-size: 1.1rem;
            color: #666;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 30px;
            margin-top: 50px;
        }
        
        .sidebar {
            position: sticky;
            top: 100px;
            height: fit-content;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            padding: 20px;
        }
        
        .sidebar-title {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .sidebar-nav {
            list-style: none;
        }
        
        .sidebar-nav li {
            margin-bottom: 10px;
        }
        
        .sidebar-nav a {
            text-decoration: none;
            color: var(--dark);
            display: block;
            padding: 8px 10px;
            border-radius: 6px;
            transition: all 0.3s;
        }
        
        .sidebar-nav a:hover {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }
        
        .sidebar-nav a.active {
            background-color: var(--primary);
            color: white;
        }
        
        .main-content {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            padding: 40px;
        }
        
        .content-section {
            margin-bottom: 50px;
        }
        
        .content-section:last-child {
            margin-bottom: 0;
        }
        
        .content-section h3 {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .content-section h4 {
            font-size: 1.4rem;
            color: var(--secondary);
            margin: 30px 0 15px;
        }
        
        .content-section h5 {
            font-size: 1.2rem;
            color: var(--dark);
            margin: 20px 0 10px;
        }
        
        .content-section p {
            margin-bottom: 15px;
        }
        
        .content-section ul, .content-section ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        .content-section li {
            margin-bottom: 8px;
        }
        
        .handdrawn {
            position: relative;
            font-family: 'Caveat', cursive;
            font-size: 1.3em;
            color: var(--accent);
        }
        
        .code-block {
            background-color: var(--code-bg);
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            position: relative;
        }
        
        .code-block::before {
            content: attr(data-language);
            position: absolute;
            top: 0;
            right: 0;
            background-color: rgba(0,0,0,0.1);
            padding: 2px 10px;
            font-size: 0.7rem;
            border-radius: 0 8px 0 8px;
            text-transform: uppercase;
        }
        
        .notes {
            background-color: rgba(252, 163, 17, 0.1);
            border-left: 3px solid var(--warning);
            padding: 15px;
            border-radius: 0 5px 5px 0;
            margin: 20px 0;
        }
        
        .notes h4 {
            color: var(--warning);
            margin-bottom: 10px;
            margin-top: 0;
            font-size: 1.1rem;
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .tip {
            background-color: rgba(76, 201, 240, 0.1);
            border-left: 3px solid var(--success);
            padding: 15px;
            border-radius: 0 5px 5px 0;
            margin: 20px 0;
        }
        
        .tip h4 {
            color: var(--success);
            margin-bottom: 10px;
            margin-top: 0;
            font-size: 1.1rem;
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .prompt-example {
            background-color: rgba(67, 97, 238, 0.05);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: monospace;
            white-space: pre-wrap;
            font-size: 0.9rem;
            position: relative;
        }
        
        .prompt-example::before {
            content: 'プロンプト例';
            position: absolute;
            top: -12px;
            left: 15px;
            background-color: white;
            padding: 0 10px;
            font-size: 0.8rem;
            color: var(--primary);
            border-radius: 4px;
            border: 1px solid rgba(67, 97, 238, 0.2);
            font-family: 'M PLUS Rounded 1c', sans-serif;
        }
        
        .service-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        }
        
        .service-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            flex-shrink: 0;
        }
        
        .service-content {
            flex-grow: 1;
        }
        
        .service-title {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .comparison-table th, .comparison-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .comparison-table th {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            font-weight: 500;
        }
        
        .comparison-table tr:last-child td {
            border-bottom: none;
        }
        
        .comparison-table tr:hover td {
            background-color: rgba(67, 97, 238, 0.05);
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            padding: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        
        .feature-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .feature-title {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .steps-container {
            position: relative;
            margin: 40px 0;
            padding-left: 30px;
        }
        
        .steps-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 15px;
            height: 100%;
            width: 2px;
            background-color: #eee;
        }
        
        .step-item {
            position: relative;
            margin-bottom: 30px;
        }
        
        .step-item:last-child {
            margin-bottom: 0;
        }
        
        .step-number {
            position: absolute;
            left: -30px;
            top: 0;
            width: 30px;
            height: 30px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        
        .step-content {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            border-left: 3px solid var(--primary);
        }
        
        .step-title {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .api-method {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-right: 8px;
        }
        
        .api-method.get {
            background-color: rgba(76, 201, 240, 0.1);
            color: var(--success);
        }
        
        .api-method.post {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }
        
        .api-method.put {
            background-color: rgba(252, 163, 17, 0.1);
            color: var(--warning);
        }
        
        .api-method.delete {
            background-color: rgba(247, 37, 133, 0.1);
            color: var(--accent);
        }
        
        .api-route {
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
        }
        
        .architecture-diagram {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            padding: 30px;
            margin: 30px 0;
        }
        
        .architecture-title {
            text-align: center;
            font-size: 1.4rem;
            color: var(--primary);
            margin-bottom: 30px;
            font-family: 'Caveat', cursive;
        }
        
        .gr-container {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            padding: 30px;
            margin: 30px 0;
            position: relative;
        }
        
        .gr-title {
            text-align: center;
            font-family: 'Caveat', cursive;
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 30px;
        }
        
        .gr-content {
            position: relative;
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 40px 0;
            text-align: center;
        }
        
        .footer-content {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        
        .footer-links a {
            color: white;
            margin: 0 15px;
            text-decoration: none;
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        
        .footer-links a:hover {
            opacity: 1;
        }
        
        /* メディアクエリ */
        @media (max-width: 991px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
                margin-bottom: 30px;
            }
            
            .sidebar-nav {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .sidebar-nav li {
                margin-bottom: 0;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .service-card {
                flex-direction: column;
                text-align: center;
            }
            
            .service-icon {
                margin: 0 auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <div class="logo-icon">🚀</div>
                    <h1>AI駆動Web開発ポータル</h1>
                </a>
                <nav>
                    <ul>
                        <li><a href="index.html">ホーム</a></li>
                        <li><a href="development-flow.html">開発フロー</a></li>
                        <li><a href="frontend.html">フロントエンド</a></li>
                        <li><a href="backend.html">バックエンド</a></li>
                        <li><a href="database.html">データベース</a></li>
                        <li><a href="prompts.html">プロンプト集</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    
    <main class="container">
        <section class="page-header">
            <h2>バックエンド開発ガイド</h2>
            <p>非エンジニアがClaude3.7を活用してWebサービスのバックエンドを構築する方法を解説します</p>
        </section>
        
        <section class="section">
            <div class="section-header">
                <h2>バックエンド開発の基本</h2>
                <p>ユーザーからは見えない部分ですが、Webサービスの中核となる機能を担います</p>
            </div>
            
            <div class="gr-container">
                <h3 class="gr-title">バックエンドとは？</h3>
                <div class="gr-content">
                    <svg viewBox="0 0 1000 500" width="100%" height="auto">
                        <!-- 背景グリッド -->
                        <defs>
                            <pattern id="smallGrid" width="10" height="10" patternUnits="userSpaceOnUse">
                                <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#f0f0f0" stroke-width="0.5"/>
                            </pattern>
                            <pattern id="grid" width="100" height="100" patternUnits="userSpaceOnUse">
                                <rect width="100" height="100" fill="url(#smallGrid)"/>
                                <path d="M 100 0 L 0 0 0 100" fill="none" stroke="#e0e0e0" stroke-width="1"/>
                            </pattern>
                        </defs>
                        <rect width="100%" height="100%" fill="url(#grid)" />
                        
                        <!-- ユーザーとデバイス -->
                        <circle cx="100" cy="120" r="40" fill="#f8f9fa" stroke="#343a40" stroke-width="2"/>
                        <circle cx="100" cy="100" r="15" fill="#343a40"/>
                        <path d="M 100 115 L 100 150" stroke="#343a40" stroke-width="6"/>
                        <path d="M 80 130 L 120 130" stroke="#343a40" stroke-width="6"/>
                        <path d="M 80 170 L 120 170" stroke="#343a40" stroke-width="6"/>
                        <text x="100" y="200" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">ユーザー</text>
                        
                        <rect x="180" y="70" width="120" height="80" rx="10" ry="10" fill="#f8f9fa" stroke="#343a40" stroke-width="2"/>
                        <rect x="180" y="150" width="120" height="20" rx="5" ry="5" fill="#f8f9fa" stroke="#343a40" stroke-width="2"/>
                        <text x="240" y="200" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">デバイス</text>
                        
                        <!-- フロントエンド -->
                        <rect x="400" y="50" width="200" height="150" rx="10" ry="10" fill="#e3f2fd" stroke="#4361ee" stroke-width="2"/>
                        <text x="500" y="90" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#4361ee">フロントエンド</text>
                        <text x="500" y="120" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">ユーザーインターフェース</text>
                        <text x="500" y="150" text-anchor="middle" font-family="'Caveat', cursive" font-size="16" fill="#f72585">HTML / CSS / JavaScript</text>
                        <text x="500" y="220" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">ブラウザで動作</text>
                        
                        <!-- バックエンド -->
                        <rect x="700" y="50" width="200" height="150" rx="10" ry="10" fill="#e0f7fa" stroke="#7209b7" stroke-width="2"/>
                        <text x="800" y="90" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#7209b7">バックエンド</text>
                        <text x="800" y="120" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">ビジネスロジック・データ処理</text>
                        <text x="800" y="150" text-anchor="middle" font-family="'Caveat', cursive" font-size="16" fill="#f72585">Node.js / Python / PHP / etc</text>
                        <text x="800" y="220" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">サーバーで動作</text>
                        
                        <!-- データベース -->
                        <circle cx="800" cy="350" r="70" fill="#f0f4c3" stroke="#2a9d8f" stroke-width="2"/>
                        <text x="800" y="340" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#2a9d8f">データベース</text>
                        <text x="800" y="370" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">データの永続化</text>
                        
                        <!-- 接続矢印 -->
                        <path d="M 140 120 L 170 120" stroke="#343a40" stroke-width="2"/>
                        <polygon points="180,120 170,115 170,125" fill="#343a40"/>
                        
                        <path d="M 300 120 L 370 120" stroke="#343a40" stroke-width="2"/>
                        <polygon points="390,120 370,115 370,125" fill="#343a40"/>
                        <text x="345" y="110" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">HTTP</text>
                        
                        <path d="M 600 120 L 670 120" stroke="#343a40" stroke-width="2"/>
                        <polygon points="690,120 670,115 670,125" fill="#343a40"/>
                        <text x="645" y="110" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">API</text>
                        
                        <path d="M 800 200 L 800 270" stroke="#343a40" stroke-width="2"/>
                        <polygon points="800,280 795,270 805,270" fill="#343a40"/>
                        <text x="815" y="240" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">CRUD操作</text>
                        
                        <!-- バックエンドの役割 -->
                        <rect x="70" y="350" width="280" height="120" rx="10" ry="10" fill="white" stroke="#f72585" stroke-width="2" stroke-dasharray="5,3"/>
                        <text x="210" y="380" text-anchor="middle" font-family="'Caveat', cursive" font-size="22" fill="#f72585">バックエンドの主な役割</text>
                        <text x="100" y="410" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ データの処理と保存</text>
                        <text x="100" y="435" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ ビジネスロジックの実装</text>
                        <text x="100" y="460" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ APIの提供</text>
                        
                        <rect x="400" y="350" width="280" height="120" rx="10" ry="10" fill="white" stroke="#f72585" stroke-width="2" stroke-dasharray="5,3"/>
                        <text x="540" y="380" text-anchor="middle" font-family="'Caveat', cursive" font-size="22" fill="#f72585">バックエンドの機能例</text>
                        <text x="430" y="410" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ ユーザー認証・権限管理</text>
                        <text x="430" y="435" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ データ検証・バリデーション</text>
                        <text x="430" y="460" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ 外部サービス連携</text>
                    </svg>
                </div>
            </div>
            
            <div class="content-wrapper">
                <aside class="sidebar">
                    <h3 class="sidebar-title">目次</h3>
                    <ul class="sidebar-nav">
                        <li><a href="#backend-overview">バックエンド概要</a></li>
                        <li><a href="#serverless">サーバーレス開発</a></li>
                        <li><a href="#api-design">API設計</a></li>
                        <li><a href="#authentication">認証・セキュリティ</a></li>
                        <li><a href="#database-integration">データベース連携</a></li>
                        <li><a href="#testing">テストと検証</a></li>
                        <li><a href="#deployment">デプロイと運用</a></li>
                        <li><a href="#Claude-techniques">Claude活用テクニック</a></li>
                    </ul>
                </aside>
                
                <div class="main-content">
                    <section id="backend-overview" class="content-section">
                        <h3>バックエンド開発の概要</h3>
                        <p>バックエンドとは、Webサービスの裏側で動作する部分で、データの処理・保存、ビジネスロジックの実装などを担当します。ユーザーからは直接見えませんが、サービスの中核となる機能を提供する重要な役割を果たします。</p>
                        
                        <div class="notes">
                            <h4>📝 バックエンドとフロントエンドの違い</h4>
                            <ul>
                                <li><strong>フロントエンド</strong>：ユーザーが直接操作する部分。ブラウザ上で動作するHTML/CSS/JavaScriptで構成</li>
                                <li><strong>バックエンド</strong>：サーバー側で動作し、データ処理や保存を担当。APIを通じてフロントエンドと通信</li>
                            </ul>
                        </div>
                        
                        <h4>バックエンド開発の主要コンポーネント</h4>
                        
                        <div class="feature-grid">
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(67, 97, 238, 0.1); color: #4361ee;">🖥️</div>
                                <h5 class="feature-title">サーバー</h5>
                                <p>Webアプリケーションを実行し、クライアントからのリクエストを処理するコンピュータ。物理サーバーやクラウドサービス上の仮想サーバーなど様々な形態があります。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(114, 9, 183, 0.1); color: #7209b7;">⚙️</div>
                                <h5 class="feature-title">アプリケーションロジック</h5>
                                <p>ビジネスルールや処理の流れを実装するコード。ユーザー認証、データ検証、計算処理など、サービスの中核となる機能を提供します。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(42, 157, 143, 0.1); color: #2a9d8f;">💾</div>
                                <h5 class="feature-title">データベース</h5>
                                <p>データを永続的に保存し、検索・更新するためのシステム。RDBMSやNoSQLなど様々な種類があり、用途に応じて選択します。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(247, 37, 133, 0.1); color: #f72585;">🔌</div>
                                <h5 class="feature-title">API</h5>
                                <p>Application Programming Interface。フロントエンドとバックエンドが通信するための仕組み。RESTやGraphQLなどの形式があります。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(252, 163, 17, 0.1); color: #fca311;">🔐</div>
                                <h5 class="feature-title">認証・セキュリティ</h5>
                                <p>ユーザーのID検証や権限管理、データ保護のための仕組み。サービスの安全性を確保する重要な要素です。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(76, 201, 240, 0.1); color: #4cc9f0;">🔄</div>
                                <h5 class="feature-title">外部サービス連携</h5>
                                <p>決済、メール送信、地図表示などの機能を提供する外部APIとの連携。サービスの機能を拡張します。</p>
                            </div>
                        </div>
                        
                        <h4>非エンジニアが取り組みやすいバックエンド開発アプローチ</h4>
                        <p>従来のバックエンド開発は専門的な知識が必要でしたが、近年はノーコード/ローコードツールやサーバーレスサービスなど、非エンジニアでも扱いやすい選択肢が増えています。</p>
                        
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>アプローチ</th>
                                        <th>特徴</th>
                                        <th>難易度</th>
                                        <th>適したケース</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>サーバーレスサービス<br>(Firebase, Supabase等)</td>
                                        <td>サーバー管理が不要、クラウドで自動スケーリング</td>
                                        <td>低〜中</td>
                                        <td>小〜中規模のアプリ、MVPの迅速な開発</td>
                                    </tr>
                                    <tr>
                                        <td>BaaS<br>(Backend-as-a-Service)</td>
                                        <td>認証やデータストレージなどの機能を提供</td>
                                        <td>低</td>
                                        <td>モバイルアプリ、小規模Webアプリ</td>
                                    </tr>
                                    <tr>
                                        <td>API管理ツール<br>(Postman, Insomnia等)</td>
                                        <td>APIの設計・テスト・ドキュメント化を支援</td>
                                        <td>中</td>
                                        <td>APIを中心としたシステム開発</td>
                                    </tr>
                                    <tr>
                                        <td>ローコードプラットフォーム<br>(Bubble, Retool等)</td>
                                        <td>ビジュアルインターフェースでの開発</td>
                                        <td>低</td>
                                        <td>内部ツール、業務アプリケーション</td>
                                    </tr>
                                    <tr>
                                        <td>ClaudeによるAPI実装<br>(Express.js, Flask等)</td>
                                        <td>AIがコードを生成、理解しやすい言語で実装</td>
                                        <td>中</td>
                                        <td>カスタム機能が必要な中〜大規模アプリ</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="tip">
                            <h4>💡 非エンジニアにおすすめのアプローチ</h4>
                            <p>まずはサーバーレスサービス（特にFirebaseやSupabase）から始めると良いでしょう。サーバー管理が不要で、認証やデータベースなどの基本機能が簡単に実装できます。より複雑な機能が必要な場合は、Claudeのサポートを受けながら徐々にカスタム実装にも挑戦してみましょう。</p>
                        </div>
                    </section>
                    
                    <section id="serverless" class="content-section">
                        <h3>サーバーレス開発の活用</h3>
                        <p>サーバーレスアーキテクチャは、サーバーの管理・運用の複雑さを排除し、機能単位でのスケーリングが可能な開発アプローチです。非エンジニアにとって大幅に開発のハードルを下げることができます。</p>
                        
                        <div class="gr-container">
                            <h3 class="gr-title">サーバーレスの仕組み</h3>
                            <div class="gr-content">
                                <svg viewBox="0 0 1000 400" width="100%" height="auto">
                                    <!-- 背景グリッド -->
                                    <defs>
                                        <pattern id="smallGrid2" width="10" height="10" patternUnits="userSpaceOnUse">
                                            <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#f0f0f0" stroke-width="0.5"/>
                                        </pattern>
                                        <pattern id="grid2" width="100" height="100" patternUnits="userSpaceOnUse">
                                            <rect width="100" height="100" fill="url(#smallGrid2)"/>
                                            <path d="M 100 0 L 0 0 0 100" fill="none" stroke="#e0e0e0" stroke-width="1"/>
                                        </pattern>
                                    </defs>
                                    <rect width="100%" height="100%" fill="url(#grid2)" />
                                    
                                    <!-- 従来のアーキテクチャ -->
                                    <rect x="100" y="50" width="350" height="100" rx="10" ry="10" fill="#f8f9fa" stroke="#343a40" stroke-width="2"/>
                                    <text x="275" y="90" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18">従来のアーキテクチャ</text>
                                    
                                    <rect x="120" y="170" width="100" height="60" rx="5" ry="5" fill="#e3f2fd" stroke="#4361ee" stroke-width="2"/>
                                    <text x="170" y="205" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">クライアント</text>
                                    
                                    <rect x="330" y="170" width="100" height="60" rx="5" ry="5" fill="#e0f7fa" stroke="#7209b7" stroke-width="2"/>
                                    <text x="380" y="195" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">サーバー</text>
                                    <text x="380" y="215" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">常時起動</text>
                                    
                                    <path d="M 220 200 L 320 200" stroke="#343a40" stroke-width="2"/>
                                    <polygon points="330,200 320,195 320,205" fill="#343a40"/>
                                    
                                    <path d="M 380 230 L 380 280" stroke="#343a40" stroke-width="2"/>
                                    <polygon points="380,290 375,280 385,280" fill="#343a40"/>
                                    
                                    <circle cx="380" cy="320" r="30" fill="#f0f4c3" stroke="#2a9d8f" stroke-width="2"/>
                                    <text x="380" y="325" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">DB</text>
                                    
                                    <!-- サーバーレスアーキテクチャ -->
                                    <rect x="550" y="50" width="350" height="100" rx="10" ry="10" fill="#f8f9fa" stroke="#343a40" stroke-width="2"/>
                                    <text x="725" y="90" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18">サーバーレスアーキテクチャ</text>
                                    
                                    <rect x="570" y="170" width="100" height="60" rx="5" ry="5" fill="#e3f2fd" stroke="#4361ee" stroke-width="2"/>
                                    <text x="620" y="205" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">クライアント</text>
                                    
                                    <rect x="780" y="170" width="100" height="60" rx="5" ry="5" fill="#e0f7fa" stroke="#7209b7" stroke-width="2"/>
                                    <text x="830" y="190" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">クラウド</text>
                                    <text x="830" y="210" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">サービス</text>
                                    
                                    <rect x="760" y="250" width="60" height="40" rx="5" ry="5" fill="#ffccd5" stroke="#f72585" stroke-width="1.5"/>
                                    <text x="790" y="275" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">関数A</text>
                                    
                                    <rect x="830" y="250" width="60" height="40" rx="5" ry="5" fill="#ffccd5" stroke="#f72585" stroke-width="1.5"/>
                                    <text x="860" y="275" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">関数B</text>
                                    
                                    <text x="830" y="310" text-anchor="middle" font-family="'Caveat', cursive" font-size="14" fill="#f72585">必要時のみ実行</text>
                                    
                                    <path d="M 670 200 L 770 200" stroke="#343a40" stroke-width="2"/>
                                    <polygon points="780,200 770,195 770,205" fill="#343a40"/>
                                    
                                    <path d="M 830 310 L 830 350" stroke="#343a40" stroke-width="2"/>
                                    <polygon points="830,360 825,350 835,350" fill="#343a40"/>
                                    
                                    <rect x="780" y="360" width="100" height="30" rx="5" ry="5" fill="#f0f4c3" stroke="#2a9d8f" stroke-width="2"/>
                                    <text x="830" y="380" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">マネージドDB</text>
                                    
                                    <!-- 比較ポイント -->
                                    <text x="120" y="370" font-family="'Caveat', cursive" font-size="16" fill="#f72585">✓ 24時間365日の運用管理</text>
                                    <text x="120" y="390" font-family="'Caveat', cursive" font-size="16" fill="#f72585">✓ スケーリングは手動対応</text>
                                    <text x="120" y="410" font-family="'Caveat', cursive" font-size="16" fill="#f72585">✓ インフラ知識が必要</text>
                                    
                                    <text x="570" y="370" font-family="'Caveat', cursive" font-size="16" fill="#f72585">✓ 運用管理不要</text>
                                    <text x="570" y="390" font-family="'Caveat', cursive" font-size="16" fill="#f72585">✓ 自動スケーリング</text>
                                    <text x="570" y="410" font-family="'Caveat', cursive" font-size="16" fill="#f72585">✓ 使った分だけ課金</text>
                                </svg>
                            </div>
                        </div>
                        
                        <h4>主要なサーバーレスサービス</h4>
                        
                        <div class="service-card" style="background-color: rgba(255, 220, 178, 0.2);">
                            <div class="service-icon" style="background-color: #ffdc9e; color: #f57c00;">
                                🔥
                            </div>
                            <div class="service-content">
                                <h5 class="service-title">Firebase</h5>
                                <p>Googleが提供するモバイル・Webアプリ開発プラットフォーム。認証、リアルタイムデータベース、ストレージ、ホスティングなど多彩な機能をワンストップで提供。非エンジニアでも比較的扱いやすい設計になっています。</p>
                                <p><strong>主な機能：</strong> Authentication（認証）、Firestore（NoSQLデータベース）、Realtime Database、Storage、Hosting、Functions（サーバーレス関数）</p>
                            </div>
                        </div>
                        
                        <div class="service-card" style="background-color: rgba(178, 235, 242, 0.2);">
                            <div class="service-icon" style="background-color: #b2ebf2; color: #00acc1;">
                                🔶
                            </div>
                            <div class="service-content">
                                <h5 class="service-title">Supabase</h5>
                                <p>オープンソースのFirebase代替サービス。PostgreSQLをベースにしたデータベースと、リアルタイム機能、認証などを提供。SQLの標準に準拠しており、拡張性が高いのが特徴です。</p>
                                <p><strong>主な機能：</strong> Authentication、PostgreSQLデータベース、リアルタイムサブスクリプション、Storage、Edge Functions</p>
                            </div>
                        </div>
                        
                        <div class="service-card" style="background-color: rgba(230, 230, 230, 0.2);">
                            <div class="service-icon" style="background-color: #e6e6e6; color: #232f3e;">
                                ☁️
                            </div>
                            <div class="service-content">
                                <h5 class="service-title">AWS Amplify</h5>
                                <p>AWSが提供するモバイル・Webアプリ開発サービス。AWSの多彩なサービスとシームレスに連携でき、スケーラビリティが高いのが特徴。ただし学習曲線がやや急です。</p>
                                <p><strong>主な機能：</strong> Authentication（Cognito）、API（AppSync/API Gateway）、DataStore、Storage（S3）、Hosting、Analytics</p>
                            </div>
                        </div>
                        
                        <div class="service-card" style="background-color: rgba(225, 190, 231, 0.2);">
                            <div class="service-icon" style="background-color: #e1bee7; color: #8e24aa;">
                                📱
                            </div>
                            <div class="service-content">
                                <h5 class="service-title">AppWrite</h5>
                                <p>オープンソースのバックエンドサービス。認証、データベース、ストレージ、Functions、リアルタイム機能などを提供。セルフホスティングも可能で、データの所有権を保持できるのが強みです。</p>
                                <p><strong>主な機能：</strong> Authentication、Database、Storage、Functions、Realtime</p>
                            </div>
                        </div>
                        
                        <h4>Firebaseを活用したバックエンド開発の基本フロー</h4>
                        <p>非エンジニアにとって比較的取り組みやすいFirebaseを例に、バックエンド開発の基本的な流れを説明します。</p>
                        
                        <div class="steps-container">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h5 class="step-title">Firebaseプロジェクトの作成</h5>
                                    <p>Googleアカウントを使ってFirebaseコンソールにアクセスし、新しいプロジェクトを作成します。これがアプリのバックエンド環境になります。</p>
                                    <div class="tip">
                                        <h4>💡 ヒント</h4>
                                        <p>プロジェクト名はわかりやすいものにしましょう。後から変更できません。無料のSpark（スパーク）プランでスタートし、必要に応じてアップグレードできます。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h5 class="step-title">認証機能の設定</h5>
                                    <p>Firebase Authenticationを使って、ユーザー登録・ログイン機能を簡単に実装できます。メール/パスワード認証、Google、Facebook、Appleなど様々な認証方法を選択できます。</p>
                                    <div class="code-block" data-language="JavaScript">
// Firebaseの認証をフロントエンドで実装する例
import { initializeApp } from 'firebase/app';
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'firebase/auth';

// Firebaseの初期化
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "your-project-id.firebaseapp.com",
  projectId: "your-project-id",
  // 他の設定は省略
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// ユーザー登録の例
async function registerUser(email, password) {
  try {
    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
    const user = userCredential.user;
    console.log('登録成功:', user);
    return user;
  } catch (error) {
    console.error('登録エラー:', error.code, error.message);
    throw error;
  }
}

// ログインの例
async function loginUser(email, password) {
  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    const user = userCredential.user;
    console.log('ログイン成功:', user);
    return user;
  } catch (error) {
    console.error('ログインエラー:', error.code, error.message);
    throw error;
  }
}
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h5 class="step-title">データベースの設計と実装</h5>
                                    <p>Firebase Firestoreを使って、NoSQLデータベースを構築します。コレクションとドキュメントの階層構造でデータを管理します。</p>
                                    <div class="code-block" data-language="JavaScript">
// Firestoreを使ったデータ操作の例
import { getFirestore, collection, addDoc, getDoc, updateDoc, deleteDoc, doc, query, where, getDocs } from 'firebase/firestore';

const db = getFirestore(app);

// データの追加
async function addPost(postData) {
  try {
    const docRef = await addDoc(collection(db, "posts"), {
      title: postData.title,
      content: postData.content,
      authorId: postData.authorId,
      createdAt: new Date()
    });
    console.log("投稿が追加されました。ID: ", docRef.id);
    return docRef.id;
  } catch (error) {
    console.error("投稿の追加に失敗しました: ", error);
    throw error;
  }
}

// データの取得
async function getPost(postId) {
  try {
    const postDoc = await getDoc(doc(db, "posts", postId));
    if (postDoc.exists()) {
      return { id: postDoc.id, ...postDoc.data() };
    } else {
      console.log("該当する投稿が見つかりません");
      return null;
    }
  } catch (error) {
    console.error("投稿の取得に失敗しました: ", error);
    throw error;
  }
}

// クエリの例（特定ユーザーの投稿を取得）
async function getUserPosts(userId) {
  try {
    const q = query(collection(db, "posts"), where("authorId", "==", userId));
    const querySnapshot = await getDocs(q);
    const posts = [];
    querySnapshot.forEach((doc) => {
      posts.push({ id: doc.id, ...doc.data() });
    });
    return posts;
  } catch (error) {
    console.error("ユーザーの投稿取得に失敗しました: ", error);
    throw error;
  }
}
                                    </div>
                                    <div class="notes">
                                        <h4>📝 データベース設計のポイント</h4>
                                        <p>NoSQLデータベースの設計は、RDBとは異なる考え方が必要です。データの取得パターンを意識し、必要に応じてデータを複製（非正規化）することで、パフォーマンスを向上させることができます。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h5 class="step-title">ストレージ機能の活用</h5>
                                    <p>Firebase Storageを使って、画像や動画などのファイルを保存できます。ユーザーのプロフィール画像や投稿画像などの管理に適しています。</p>
                                    <div class="code-block" data-language="JavaScript">
// Firebase Storageを使った画像アップロードの例
import { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';

const storage = getStorage(app);

// 画像のアップロード
async function uploadProfileImage(userId, imageFile) {
  try {
    // ストレージのパスを定義
    const storageRef = ref(storage, `profile-images/${userId}`);
    
    // ファイルをアップロード
    const snapshot = await uploadBytes(storageRef, imageFile);
    console.log('画像がアップロードされました');
    
    // ダウンロードURLを取得
    const downloadURL = await getDownloadURL(snapshot.ref);
    console.log('画像URL:', downloadURL);
    
    // URLをユーザープロフィールに保存（例）
    await updateDoc(doc(db, "users", userId), {
      profileImageUrl: downloadURL
    });
    
    return downloadURL;
  } catch (error) {
    console.error('画像アップロードエラー:', error);
    throw error;
  }
}
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <h5 class="step-title">Cloud Functionsの活用</h5>
                                    <p>Firebase Cloud Functionsを使って、特定のイベントをトリガーに処理を実行するサーバーレス関数を作成できます。バックエンドロジックを実装する強力な方法です。</p>
                                    <div class="code-block" data-language="JavaScript">
// Firebase Cloud Functionsの例（Node.js）
// functions/index.js
const functions = require('firebase-functions');
const admin = require('firebase-admin');
admin.initializeApp();

// 新しいユーザーが登録されたときに実行される関数
exports.createUserProfile = functions.auth.user().onCreate((user) => {
  // Firestoreにユーザープロフィールを作成
  return admin.firestore().collection('users').doc(user.uid).set({
    displayName: user.displayName || '',
    email: user.email,
    photoURL: user.photoURL || '',
    createdAt: admin.firestore.FieldValue.serverTimestamp()
  });
});

// 新しい投稿が作成されたときに通知を送る関数
exports.notifyNewPost = functions.firestore
  .document('posts/{postId}')
  .onCreate(async (snapshot, context) => {
    const postData = snapshot.data();
    const authorId = postData.authorId;
    
    // 投稿者のフォロワーを取得
    const followersSnapshot = await admin.firestore()
      .collection('followers')
      .where('followingId', '==', authorId)
      .get();
    
    // 各フォロワーに通知を送信
    const notifications = [];
    followersSnapshot.forEach(doc => {
      const followerId = doc.data().followerId;
      notifications.push(
        admin.firestore().collection('notifications').add({
          userId: followerId,
          type: 'newPost',
          postId: context.params.postId,
          authorId: authorId,
          read: false,
          createdAt: admin.firestore.FieldValue.serverTimestamp()
        })
      );
    });
    
    return Promise.all(notifications);
  });
                                    </div>
                                    <div class="tip">
                                        <h4>💡 ヒント</h4>
                                        <p>Cloud Functionsは少しハードルが高いかもしれませんが、Claudeを活用して必要な機能のコードを生成することで、非エンジニアでも実装可能です。基本的なJavaScriptの構文を理解しておくと役立ちます。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <h5 class="step-title">セキュリティルールの設定</h5>
                                    <p>Firebaseのセキュリティルールを使って、データベースやストレージへのアクセス制御を行います。誰がどのデータにアクセスできるかを細かく制御できます。</p>
                                    <div class="code-block" data-language="JavaScript">
// Firestoreのセキュリティルールの例
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ユーザープロフィールのルール
    match /users/{userId} {
      // 誰でも閲覧可能、自分のプロフィールのみ編集可能
      allow read: if true;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
    
    // 投稿のルール
    match /posts/{postId} {
      // 誰でも閲覧可能、投稿者のみ編集・削除可能
      allow read: if true;
      allow create: if request.auth != null;
      allow update, delete: if request.auth != null && request.auth.uid == resource.data.authorId;
    }
    
    // コメントのルール
    match /comments/{commentId} {
      // 誰でも閲覧可能、投稿者のみ編集・削除可能
      allow read: if true;
      allow create: if request.auth != null;
      allow update, delete: if request.auth != null && request.auth.uid == resource.data.authorId;
    }
  }
}

// Storageのセキュリティルールの例
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // プロフィール画像のルール
    match /profile-images/{userId} {
      // 誰でも閲覧可能、自分の画像のみアップロード可能
      allow read: if true;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
    
    // 投稿画像のルール
    match /post-images/{postId} {
      // 誰でも閲覧可能、認証済みユーザーのみアップロード可能
      allow read: if true;
      allow write: if request.auth != null;
    }
  }
}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="prompt-example">
Claudeさん、Firebaseを使ったSNSアプリのバックエンド開発をサポートしてください。

以下の機能を実装するためのFirebase構成と必要なコードを教えてください:

1. ユーザー認証（メール/パスワード、Googleログイン）
2. ユーザープロフィール管理（名前、自己紹介、プロフィール画像）
3. 投稿機能（テキスト、画像、いいね、コメント）
4. フォロー機能（ユーザー間の関係）
5. タイムライン表示（フォローしているユーザーの投稿）

特に以下の点について詳しく説明してください:
- Firestoreのデータ構造設計
- セキュリティルールの設定
- Cloud Functionsでの拡張機能
- フロントエンドからの接続方法

私はプログラミング初心者なので、コードには詳細なコメントをつけて説明してもらえると助かります。
                        </div>
                    </section>
                    
                    <section id="api-design" class="content-section">
                        <h3>API設計の基本</h3>
                        <p>API（Application Programming Interface）は、フロントエンドとバックエンドを接続する重要な仕組みです。適切に設計されたAPIは、システムの拡張性と保守性を高め、フロントエンド開発をスムーズに進めることができます。</p>
                        
                        <div class="gr-container">
                            <h3 class="gr-title">APIの役割と種類</h3>
                            <div class="gr-content">
                                <svg viewBox="0 0 1000 500" width="100%" height="auto">
                                    <!-- 背景グリッド -->
                                    <defs>
                                        <pattern id="smallGrid3" width="10" height="10" patternUnits="userSpaceOnUse">
                                            <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#f0f0f0" stroke-width="0.5"/>
                                        </pattern>
                                        <pattern id="grid3" width="100" height="100" patternUnits="userSpaceOnUse">
                                            <rect width="100" height="100" fill="url(#smallGrid3)"/>
                                            <path d="M 100 0 L 0 0 0 100" fill="none" stroke="#e0e0e0" stroke-width="1"/>
                                        </pattern>
                                    </defs>
                                    <rect width="100%" height="100%" fill="url(#grid3)" />
                                    
                                    <!-- APIの概念図 -->
                                    <rect x="50" y="150" width="200" height="200" rx="10" ry="10" fill="#e3f2fd" stroke="#4361ee" stroke-width="2"/>
                                    <text x="150" y="190" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#4361ee">フロントエンド</text>
                                    <text x="150" y="220" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">ウェブサイト / アプリ</text>
                                    <text x="150" y="300" text-anchor="middle" font-family="'Caveat', cursive" font-size="16" fill="#f72585">データの表示・入力</text>
                                    
                                    <rect x="750" y="150" width="200" height="200" rx="10" ry="10" fill="#e0f7fa" stroke="#7209b7" stroke-width="2"/>
                                    <text x="850" y="190" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#7209b7">バックエンド</text>
                                    <text x="850" y="220" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">サーバー / データベース</text>
                                    <text x="850" y="300" text-anchor="middle" font-family="'Caveat', cursive" font-size="16" fill="#f72585">データの処理・保存</text>
                                    
                                    <!-- API -->
                                    <rect x="400" y="150" width="200" height="200" rx="10" ry="10" fill="#fff3e0" stroke="#fca311" stroke-width="2"/>
                                    <text x="500" y="190" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#fca311">API</text>
                                    <text x="500" y="220" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">インターフェース</text>
                                    <text x="500" y="300" text-anchor="middle" font-family="'Caveat', cursive" font-size="16" fill="#f72585">データの受け渡し</text>
                                    
                                    <!-- 接続矢印 -->
                                    <path d="M 250 200 L 380 200" stroke="#343a40" stroke-width="2"/>
                                    <polygon points="390,200 380,195 380,205" fill="#343a40"/>
                                    <text x="320" y="190" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">リクエスト</text>
                                    
                                    <path d="M 600 250 L 730 250" stroke="#343a40" stroke-width="2"/>
                                    <polygon points="740,250 730,245 730,255" fill="#343a40"/>
                                    <text x="670" y="240" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">データ処理</text>
                                    
                                    <path d="M 730 200 L 600 200" stroke="#343a40" stroke-width="2"/>
                                    <polygon points="590,200 600,195 600,205" fill="#343a40"/>
                                    <text x="670" y="190" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">データ取得</text>
                                    
                                    <path d="M 380 250 L 250 250" stroke="#343a40" stroke-width="2"/>
                                    <polygon points="240,250 250,245 250,255" fill="#343a40"/>
                                    <text x="320" y="240" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">レスポンス</text>
                                    
                                    <!-- API種類 -->
                                    <rect x="100" y="400" width="200" height="80" rx="10" ry="10" fill="#ffccd5" stroke="#f72585" stroke-width="1.5"/>
                                    <text x="200" y="440" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16" fill="#f72585">REST API</text>
                                    <text x="200" y="465" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">HTTPメソッドでデータ操作</text>
                                    
                                    <rect x="400" y="400" width="200" height="80" rx="10" ry="10" fill="#c9f7f5" stroke="#2a9d8f" stroke-width="1.5"/>
                                    <text x="500" y="440" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16" fill="#2a9d8f">GraphQL</text>
                                    <text x="500" y="465" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">必要なデータだけをクエリ</text>
                                    
                                    <rect x="700" y="400" width="200" height="80" rx="10" ry="10" fill="#dccff7" stroke="#7209b7" stroke-width="1.5"/>
                                    <text x="800" y="440" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16" fill="#7209b7">WebSocket</text>
                                    <text x="800" y="465" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">リアルタイム双方向通信</text>
                                    
                                    <path d="M 500 300 C 500 320, 500 340, 500 390" stroke="#343a40" stroke-width="1.5" stroke-dasharray="5,3"/>
                                    <polygon points="500,400 495,390 505,390" fill="#343a40"/>
                                    
                                    <path d="M 500 300 C 400 320, 300 340, 230 390" stroke="#343a40" stroke-width="1.5" stroke-dasharray="5,3"/>
                                    <polygon points="220,400 225,390 235,390" fill="#343a40"/>
                                    
                                    <path d="M 500 300 C 600 320, 700 340, 770 390" stroke="#343a40" stroke-width="1.5" stroke-dasharray="5,3"/>
                                    <polygon points="780,400 775,390 765,390" fill="#343a40"/>
                                </svg>
                            </div>
                        </div>
                        
                        <h4>RESTful APIの基本原則</h4>
                        <p>REST（Representational State Transfer）は、Webサービスを設計するための一連のアーキテクチャ原則です。RESTful APIは、これらの原則に従って設計されたAPIを指します。</p>
                        
                        <div class="feature-grid">
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(67, 97, 238, 0.1); color: #4361ee;">🔄</div>
                                <h5 class="feature-title">リソース指向</h5>
                                <p>システム内の情報は「リソース」として表現され、各リソースは一意のURI（エンドポイント）で識別されます。例えば、<code>/users</code>、<code>/posts</code>など。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(76, 201, 240, 0.1); color: #4cc9f0;">📝</div>
                                <h5 class="feature-title">HTTPメソッド</h5>
                                <p>標準のHTTPメソッド（GET, POST, PUT, DELETE）を使ってリソースを操作します。それぞれ読取、作成、更新、削除に対応します。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(252, 163, 17, 0.1); color: #fca311;">🔍</div>
                                <h5 class="feature-title">ステートレス</h5>
                                <p>サーバーはリクエスト間でクライアントの状態を保持しません。各リクエストは、必要な情報をすべて含んでいる必要があります。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(247, 37, 133, 0.1); color: #f72585;">📋</div>
                                <h5 class="feature-title">統一インターフェース</h5>
                                <p>一貫した方法でリソースにアクセスします。URLパターン、リクエスト/レスポンス形式、ステータスコードなどが統一されています。</p>
                            </div>
                        </div>
                        
                        <h4>主要なHTTPメソッドと使用例</h4>
                        
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>HTTPメソッド</th>
                                        <th>用途</th>
                                        <th>APIエンドポイント例</th>
                                        <th>説明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="api-method get">GET</span></td>
                                        <td>データの取得</td>
                                        <td><span class="api-route">/api/users</span></td>
                                        <td>全ユーザーのリストを取得する</td>
                                    </tr>
                                    <tr>
                                        <td><span class="api-method get">GET</span></td>
                                        <td>特定データの取得</td>
                                        <td><span class="api-route">/api/users/{id}</span></td>
                                        <td>特定のユーザー情報を取得する</td>
                                    </tr>
                                    <tr>
                                        <td><span class="api-method post">POST</span></td>
                                        <td>データの作成</td>
                                        <td><span class="api-route">/api/users</span></td>
                                        <td>新しいユーザーを作成する</td>
                                    </tr>
                                    <tr>
                                        <td><span class="api-method put">PUT</span></td>
                                        <td>データの更新（全体）</td>
                                        <td><span class="api-route">/api/users/{id}</span></td>
                                        <td>ユーザー情報を完全に置き換える</td>
                                    </tr>
                                    <tr>
                                        <td><span class="api-method put">PATCH</span></td>
                                        <td>データの更新（一部）</td>
                                        <td><span class="api-route">/api/users/{id}</span></td>
                                        <td>ユーザー情報の一部を更新する</td>
                                    </tr>
                                    <tr>
                                        <td><span class="api-method delete">DELETE</span></td>
                                        <td>データの削除</td>
                                        <td><span class="api-route">/api/users/{id}</span></td>
                                        <td>特定のユーザーを削除する</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h4>Express.jsを使ったREST API実装例</h4>
                        <p>Node.jsのフレームワークであるExpress.jsを使って、シンプルなREST APIを実装する例を紹介します。</p>
                        
                        <div class="code-block" data-language="JavaScript">
// Express.jsを使ったREST API実装例
const express = require('express');
const bodyParser = require('body-parser');
const app = express();
const port = 3000;

// ミドルウェアの設定
app.use(bodyParser.json());  // JSONリクエストの解析
app.use(bodyParser.urlencoded({ extended: true }));  // URLエンコードされたデータの解析

// データベースの代わりに配列を使用（実際はMongoDBなどを使用）
let users = [
  { id: 1, name: '山田太郎', email: 'yamada@example.com' },
  { id: 2, name: '佐藤花子', email: 'sato@example.com' }
];

// 全ユーザーの取得 (GET /api/users)
app.get('/api/users', (req, res) => {
  res.json(users);
});

// 特定ユーザーの取得 (GET /api/users/:id)
app.get('/api/users/:id', (req, res) => {
  const userId = parseInt(req.params.id);
  const user = users.find(u => u.id === userId);
  
  if (!user) {
    return res.status(404).json({ message: 'ユーザーが見つかりません' });
  }
  
  res.json(user);
});

// 新規ユーザーの作成 (POST /api/users)
app.post('/api/users', (req, res) => {
  const { name, email } = req.body;
  
  // 入力検証
  if (!name || !email) {
    return res.status(400).json({ message: '名前とメールアドレスは必須です' });
  }
  
  // 新しいユーザーの作成
  const newId = users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1;
  const newUser = { id: newId, name, email };
  
  users.push(newUser);
  res.status(201).json(newUser);
});

// ユーザー情報の更新 (PUT /api/users/:id)
app.put('/api/users/:id', (req, res) => {
  const userId = parseInt(req.params.id);
  const { name, email } = req.body;
  
  // 入力検証
  if (!name || !email) {
    return res.status(400).json({ message: '名前とメールアドレスは必須です' });
  }
  
  const userIndex = users.findIndex(u => u.id === userId);
  
  if (userIndex === -1) {
    return res.status(404).json({ message: 'ユーザーが見つかりません' });
  }
  
  // ユーザー情報の更新
  users[userIndex] = { id: userId, name, email };
  res.json(users[userIndex]);
});

// ユーザーの削除 (DELETE /api/users/:id)
app.delete('/api/users/:id', (req, res) => {
  const userId = parseInt(req.params.id);
  const userIndex = users.findIndex(u => u.id === userId);
  
  if (userIndex === -1) {
    return res.status(404).json({ message: 'ユーザーが見つかりません' });
  }
  
  // ユーザーの削除
  const deletedUser = users[userIndex];
  users = users.filter(u => u.id !== userId);
  
  res.json({ message: 'ユーザーが削除されました', user: deletedUser });
});

// サーバーの起動
app.listen(port, () => {
  console.log(`サーバーが http://localhost:${port} で起動しました`);
});
                        </div>
                        
                        <div class="notes">
                            <h4>📝 APIセキュリティのポイント</h4>
                            <p>APIを公開する際は、以下のセキュリティ対策を検討しましょう：</p>
                            <ul>
                                <li><strong>認証・認可</strong>：JWT（JSON Web Token）などを使用したトークンベースの認証</li>
                                <li><strong>HTTPS</strong>：通信の暗号化</li>
                                <li><strong>入力検証</strong>：全てのユーザー入力を検証し、インジェクション攻撃を防止</li>
                                <li><strong>レート制限</strong>：大量リクエストによるDoS攻撃を防止</li>
                                <li><strong>CORS設定</strong>：クロスオリジンリクエストの制限</li>
                            </ul>
                        </div>
                        
                        <h4>API設計のベストプラクティス</h4>
                        <ul>
                            <li><strong>一貫性のあるURL設計</strong>：<code>/api/resources</code>のような規則的なパターンを使用</li>
                            <li><strong>複数形のリソース名</strong>：<code>/users</code>のように、リソース名は複数形が推奨</li>
                            <li><strong>バージョニング</strong>：<code>/api/v1/resources</code>のように、APIにバージョンを含める</li>
                            <li><strong>フィルタリングとページネーション</strong>：<code>/users?age=30&limit=10&page=2</code>のようにクエリパラメータを使用</li>
                            <li><strong>ネストされた関係の表現</strong>：<code>/users/123/posts</code>のように関連リソースを表現</li>
                            <li><strong>適切なHTTPステータスコード</strong>：200（成功）、201（作成成功）、400（不正リクエスト）、401（認証失敗）など</li>
                            <li><strong>エラーレスポンスの標準化</strong>：エラーコード、メッセージ、詳細情報を含める</li>
                            <li><strong>ドキュメント化</strong>：Swagger/OpenAPIなどを使ってAPIを文書化</li>
                        </ul>
                        
                        <div class="prompt-example">
Claudeさん、オンライン書店アプリのためのREST APIを設計してください。

以下のリソースを扱うAPIが必要です：
1. ユーザー（登録、認証、プロフィール情報）
2. 書籍（一覧表示、詳細情報、検索機能）
3. レビュー（書籍に対するユーザーレビュー）
4. 注文（書籍の購入、注文履歴）

各エンドポイントについて以下の情報を含めてください：
- HTTPメソッド（GET/POST/PUT/DELETE）
- URL
- 期待されるリクエストデータ（必要な場合）
- レスポンスデータの形式
- 成功・エラー時のステータスコード

Node.js + Express.jsで実装する場合の基本的なルーティングコードも示してください。
                        </div>
                    </section>
                    
                    <section id="authentication" class="content-section">
                        <h3>認証・セキュリティ対策</h3>
                        <p>Webサービスにおけるセキュリティはきわめて重要です。特にユーザー情報や決済データなどを扱うサービスでは、適切な認証とセキュリティ対策が不可欠です。</p>
                        
                        <div class="gr-container">
                            <h3 class="gr-title">認証フローの仕組み</h3>
                            <div class="gr-content">
                                <svg viewBox="0 0 1000 400" width="100%" height="auto">
                                    <!-- 背景グリッド -->
                                    <defs>
                                        <pattern id="smallGrid4" width="10" height="10" patternUnits="userSpaceOnUse">
                                            <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#f0f0f0" stroke-width="0.5"/>
                                        </pattern>
                                        <pattern id="grid4" width="100" height="100" patternUnits="userSpaceOnUse">
                                            <rect width="100" height="100" fill="url(#smallGrid4)"/>
                                            <path d="M 100 0 L 0 0 0 100" fill="none" stroke="#e0e0e0" stroke-width="1"/>
                                        </pattern>
                                    </defs>
                                    <rect width="100%" height="100%" fill="url(#grid4)" />
                                    
                                    <!-- クライアント -->
                                    <rect x="100" y="100" width="200" height="80" rx="10" ry="10" fill="#e3f2fd" stroke="#4361ee" stroke-width="2"/>
                                    <text x="200" y="145" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">クライアント</text>
                                    
                                    <!-- 認証サーバー -->
                                    <rect x="500" y="100" width="200" height="80" rx="10" ry="10" fill="#e0f7fa" stroke="#7209b7" stroke-width="2"/>
                                    <text x="600" y="145" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">認証サーバー</text>
                                    
                                    <!-- APIサーバー -->
                                    <rect x="800" y="100" width="200" height="80" rx="10" ry="10" fill="#fff3e0" stroke="#fca311" stroke-width="2"/>
                                    <text x="900" y="145" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">APIサーバー</text>
                                    
                                    <!-- 認証フロー -->
                                    <path d="M 200 180 L 200 220" stroke="#343a40" stroke-width="1"/>
                                    <text x="180" y="200" text-anchor="end" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">1. ログイン</text>
                                    
                                    <path d="M 200 220 L 600 220" stroke="#343a40" stroke-width="1" marker-end="url(#arrow)"/>
                                    <text x="400" y="210" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">2. 認証情報を送信</text>
                                    <text x="400" y="225" text-anchor="middle" font-family="'Fira Code', monospace" font-size="10">{username, password}</text>
                                    
                                    <path d="M 600 240 L 200 240" stroke="#343a40" stroke-width="1" marker-end="url(#arrow)"/>
                                    <text x="400" y="260" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">3. トークン発行</text>
                                    <text x="400" y="275" text-anchor="middle" font-family="'Fira Code', monospace" font-size="10">{access_token, refresh_token}</text>
                                    
                                    <path d="M 200 260 L 200 300" stroke="#343a40" stroke-width="1"/>
                                    <text x="180" y="280" text-anchor="end" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">4. トークン保存</text>
                                    
                                    <path d="M 200 300 L 900 300" stroke="#343a40" stroke-width="1" marker-end="url(#arrow)"/>
                                    <text x="550" y="290" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">5. APIリクエスト + トークン</text>
                                    <text x="550" y="305" text-anchor="middle" font-family="'Fira Code', monospace" font-size="10">Authorization: Bearer {token}</text>
                                    
                                    <path d="M 900 320 L 600 320" stroke="#343a40" stroke-width="1" marker-end="url(#arrow)"/>
                                    <text x="750" y="340" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">6. トークン検証</text>
                                    
                                    <path d="M 600 340 L 900 340" stroke="#343a40" stroke-width="1" marker-end="url(#arrow)"/>
                                    <text x="750" y="360" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">7. 検証結果</text>
                                    
                                    <path d="M 900 360 L 200 360" stroke="#343a40" stroke-width="1" marker-end="url(#arrow)"/>
                                    <text x="550" y="380" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="12">8. APIレスポンス</text>
                                    
                                    <!-- Arrow definition -->
                                    <defs>
                                        <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                            <path d="M0,0 L0,6 L9,3 z" fill="#343a40" />
                                        </marker>
                                    </defs>
                                </svg>
                            </div>
                        </div>
                        
                        <h4>主要な認証方式</h4>
                        
                        <div class="feature-grid">
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(67, 97, 238, 0.1); color: #4361ee;">🔑</div>
                                <h5 class="feature-title">JWTトークン認証</h5>
                                <p>JSON Web Token（JWT）は、コンパクトでセルフコンテインドな認証トークンです。ユーザー情報や権限を安全に保持し、ステートレスな認証を実現します。</p>
                                <p>デジタル署名によってトークンの改ざんを防ぎ、必要な認証情報をすべてトークン内に含めることができます。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(76, 201, 240, 0.1); color: #4cc9f0;">🔐</div>
                                <h5 class="feature-title">OAuth 2.0</h5>
                                <p>サードパーティのサービスと連携するための認証プロトコルです。Google、Facebook、Twitterなどの外部サービスのアカウントを使ったログインを実装できます。</p>
                                <p>ユーザーはパスワードを共有せずに、特定のアクセス権限だけを付与できます。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(252, 163, 17, 0.1); color: #fca311;">📱</div>
                                <h5 class="feature-title">多要素認証（MFA）</h5>
                                <p>パスワードに加えて、別の認証要素（SMSコード、メール認証、認証アプリのコードなど）を要求することで、セキュリティを強化します。</p>
                                <p>一つの認証情報が漏洩しても、不正アクセスを防止できます。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(247, 37, 133, 0.1); color: #f72585;">🔒</div>
                                <h5 class="feature-title">APIキー認証</h5>
                                <p>シンプルな認証方式で、リクエストヘッダーやクエリパラメータにAPIキーを含めることで認証します。主に内部サービス間やサーバー間の通信に使用されます。</p>
                                <p>実装が容易ですが、キー漏洩のリスクがあるため、適切な場面で使用する必要があります。</p>
                            </div>
                        </div>
                        
                        <h4>JWT認証の実装例</h4>
                        <p>Node.js + Expressを使った、JWTベースの認証システムの実装例を紹介します。</p>
                        
                        <div class="code-block" data-language="JavaScript">
// JWT認証の実装例（Node.js + Express）
const express = require('express');
const jwt = require('jsonwebtoken');
const bcrypt = require('bcrypt'); // パスワードハッシュ化
const bodyParser = require('body-parser');

const app = express();
const PORT = 3000;
const JWT_SECRET = 'your_jwt_secret_key'; // 実際の環境では環境変数などから安全に読み込む

app.use(bodyParser.json());

// テスト用ユーザーデータ（実際はデータベースに保存）
const users = [
  {
    id: 1,
    username: 'user1',
    // パスワード: 'password1' をハッシュ化した値
    password: '$2b$10$mLEHlqj0X8Kj3z9Yw5wMaO7zUr7cRJ2L5wEq4y9.WxQXS/7e/XS9q',
    role: 'user'
  },
  {
    id: 2,
    username: 'admin1',
    // パスワード: 'adminpass' をハッシュ化した値
    password: '$2b$10$mKK2PUOHvJ7o8UUvdnCmVOEUeKnCMvrHMOI27FxO9iI7M3TswyEwq',
    role: 'admin'
  }
];

// ユーザー登録エンドポイント
app.post('/api/register', async (req, res) => {
  try {
    const { username, password } = req.body;
    
    // 入力検証
    if (!username || !password) {
      return res.status(400).json({ message: 'ユーザー名とパスワードは必須です' });
    }
    
    // ユーザー名の重複チェック
    if (users.find(user => user.username === username)) {
      return res.status(400).json({ message: 'このユーザー名は既に使用されています' });
    }
    
    // パスワードのハッシュ化（セキュリティ強化）
    const saltRounds = 10;
    const hashedPassword = await bcrypt.hash(password, saltRounds);
    
    // 新規ユーザーの作成（実際はデータベースに保存）
    const newUser = {
      id: users.length + 1,
      username,
      password: hashedPassword,
      role: 'user'
    };
    
    users.push(newUser);
    
    res.status(201).json({ 
      message: 'ユーザー登録が完了しました',
      userId: newUser.id
    });
    
  } catch (error) {
    console.error('登録エラー:', error);
    res.status(500).json({ message: 'サーバーエラーが発生しました' });
  }
});

// ログインエンドポイント
app.post('/api/login', async (req, res) => {
  try {
    const { username, password } = req.body;
    
    // ユーザーの検索
    const user = users.find(u => u.username === username);
    if (!user) {
      return res.status(401).json({ message: 'ユーザー名またはパスワードが正しくありません' });
    }
    
    // パスワードの検証
    const isPasswordValid = await bcrypt.compare(password, user.password);
    if (!isPasswordValid) {
      return res.status(401).json({ message: 'ユーザー名またはパスワードが正しくありません' });
    }
    
    // JWTトークンの生成
    const payload = {
      sub: user.id,
      username: user.username,
      role: user.role
    };
    
    // アクセストークン（短期間有効）
    const accessToken = jwt.sign(
      payload,
      JWT_SECRET,
      { expiresIn: '15m' } // 15分間有効
    );
    
    // リフレッシュトークン（長期間有効）
    const refreshToken = jwt.sign(
      { sub: user.id },
      JWT_SECRET,
      { expiresIn: '7d' } // 7日間有効
    );
    
    res.json({
      message: 'ログイン成功',
      accessToken,
      refreshToken,
      expiresIn: 900 // 15分（秒単位）
    });
    
  } catch (error) {
    console.error('ログインエラー:', error);
    res.status(500).json({ message: 'サーバーエラーが発生しました' });
  }
});

// JWTトークン検証ミドルウェア
const authenticateJWT = (req, res, next) => {
  const authHeader = req.headers.authorization;
  
  if (!authHeader) {
    return res.status(401).json({ message: '認証が必要です' });
  }
  
  const token = authHeader.split(' ')[1]; // "Bearer {token}"
  
  try {
    // トークンの検証
    const decoded = jwt.verify(token, JWT_SECRET);
    req.user = decoded; // リクエストにユーザー情報を添付
    next(); // 次のミドルウェアまたはルートハンドラへ
  } catch (error) {
    console.error('トークン検証エラー:', error);
    
    if (error.name === 'TokenExpiredError') {
      return res.status(401).json({ message: 'トークンの有効期限が切れています' });
    }
    
    return res.status(403).json({ message: '無効なトークンです' });
  }
};

// 保護されたリソースへのアクセス例
app.get('/api/profile', authenticateJWT, (req, res) => {
  // JWTから取得したユーザーID
  const userId = req.user.sub;
  
  // ユーザー情報の取得（実際はデータベースから）
  const user = users.find(u => u.id === userId);
  
  if (!user) {
    return res.status(404).json({ message: 'ユーザーが見つかりません' });
  }
  
  // パスワードを除いたユーザー情報を返す
  const { password, ...userInfo } = user;
  
  res.json(userInfo);
});

// 管理者専用エンドポイント
app.get('/api/admin-only', authenticateJWT, (req, res) => {
  // 管理者権限チェック
  if (req.user.role !== 'admin') {
    return res.status(403).json({ message: 'アクセス権限がありません' });
  }
  
  res.json({ message: '管理者コンテンツにアクセスしました' });
});

// リフレッシュトークンでアクセストークンを更新
app.post('/api/refresh-token', (req, res) => {
  const { refreshToken } = req.body;
  
  if (!refreshToken) {
    return res.status(400).json({ message: 'リフレッシュトークンが必要です' });
  }
  
  try {
    // リフレッシュトークンの検証
    const decoded = jwt.verify(refreshToken, JWT_SECRET);
    
    // ユーザー情報の取得
    const user = users.find(u => u.id === decoded.sub);
    
    if (!user) {
      return res.status(404).json({ message: 'ユーザーが見つかりません' });
    }
    
    // 新しいアクセストークンの生成
    const payload = {
      sub: user.id,
      username: user.username,
      role: user.role
    };
    
    const newAccessToken = jwt.sign(
      payload,
      JWT_SECRET,
      { expiresIn: '15m' }
    );
    
    res.json({
      accessToken: newAccessToken,
      expiresIn: 900 // 15分（秒単位）
    });
    
  } catch (error) {
    console.error('リフレッシュトークンエラー:', error);
    return res.status(403).json({ message: '無効なリフレッシュトークンです' });
  }
});

app.listen(PORT, () => {
  console.log(`認証サーバーが http://localhost:${PORT} で起動しました`);
});
                        </div>
                        
                        <div class="tip">
                            <h4>💡 認証実装のヒント</h4>
                            <p>サーバーレスサービス（FirebaseやSupabase）を使うと、認証機能を簡単に実装できます。Firebaseの場合、メール/パスワード認証やSNS連携認証など、数行のコードで導入可能です。</p>
                        </div>
                        
                        <h4>主要なセキュリティ対策</h4>
                        <p>認証だけでなく、以下のセキュリティ対策も考慮することが重要です。</p>
                        
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>対策</th>
                                        <th>内容</th>
                                        <th>実装方法</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>HTTPS</td>
                                        <td>通信の暗号化</td>
                                        <td>SSL/TLS証明書の導入、HTTPSリダイレクト設定</td>
                                    </tr>
                                    <tr>
                                        <td>CSRFトークン</td>
                                        <td>クロスサイトリクエストフォージェリ対策</td>
                                        <td>フォーム送信時に固有トークンを検証</td>
                                    </tr>
                                    <tr>
                                        <td>XSS対策</td>
                                        <td>クロスサイトスクリプティング対策</td>
                                        <td>ユーザー入力のエスケープ、CSPの設定</td>
                                    </tr>
                                    <tr>
                                        <td>レート制限</td>
                                        <td>過剰なリクエストの制限</td>
                                        <td>IP/ユーザーごとのリクエスト数制限</td>
                                    </tr>
                                    <tr>
                                        <td>データ検証</td>
                                        <td>入力データの検証</td>
                                        <td>バリデーションロジックの実装</td>
                                    </tr>
                                    <tr>
                                        <td>セキュアなパスワード保存</td>
                                        <td>パスワードのハッシュ化</td>
                                        <td>bcryptなどのハッシュアルゴリズム使用</td>
                                    </tr>
                                    <tr>
                                        <td>セキュリティヘッダー</td>
                                        <td>レスポンスヘッダーでのセキュリティ強化</td>
                                        <td>X-XSS-Protection, X-Content-Type-Options設定</td>
                                    </tr>
                                    <tr>
                                        <td>CORS設定</td>
                                        <td>許可されたオリジンのみアクセス可能に</td>
                                        <td>適切なAccess-Control-Allow-Origin設定</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="prompt-example">
Claudeさん、Nodeとアクシプレスを使用してJWT認証システムを作成してください。以下の機能が必要です：

1. ユーザー登録機能
   - ユーザー名、メール、パスワードの検証
   - パスワードの安全なハッシュ化
   - データベースへの保存（モックでOK）

2. ログイン機能
   - ユーザー検証
   - JWTトークン発行（アクセストークンとリフレッシュトークン）
   - トークン有効期限の設定

3. 認証ミドルウェア
   - リクエストからトークンを抽出
   - トークン検証
   - ユーザー権限の確認

4. セキュリティ対策
   - XSS対策
   - CSRF対策
   - レート制限の実装

各エンドポイントの実装コードと、クライアント側でのトークン管理方法についても説明してください。
                        </div>
                    </section>
                    
                    <section id="database-integration" class="content-section">
                        <h3>データベース連携</h3>
                        <p>データベースはWebサービスの中核を成す重要な要素です。ユーザー情報、投稿、商品データなど、サービスに関わる様々なデータを永続的に保存し、効率的に検索・更新するための仕組みを提供します。</p>
                        
                        <div class="gr-container">
                            <h3 class="gr-title">データベースの種類と特徴</h3>
                            <div class="gr-content">
                                <svg viewBox="0 0 1000 500" width="100%" height="auto">
                                    <!-- 背景グリッド -->
                                    <defs>
                                        <pattern id="smallGrid5" width="10" height="10" patternUnits="userSpaceOnUse">
                                            <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#f0f0f0" stroke-width="0.5"/>
                                        </pattern>
                                        <pattern id="grid5" width="100" height="100" patternUnits="userSpaceOnUse">
                                            <rect width="100" height="100" fill="url(#smallGrid5)"/>
                                            <path d="M 100 0 L 0 0 0 100" fill="none" stroke="#e0e0e0" stroke-width="1"/>
                                        </pattern>
                                    </defs>
                                    <rect width="100%" height="100%" fill="url(#grid5)" />
                                    
                                    <!-- リレーショナルデータベース -->
                                    <rect x="100" y="50" width="350" height="180" rx="10" ry="10" fill="#e3f2fd" stroke="#4361ee" stroke-width="2"/>
                                    <text x="275" y="80" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#4361ee">リレーショナルデータベース（RDB）</text>
                                    
                                    <rect x="120" y="100" width="150" height="110" rx="5" ry="5" fill="white" stroke="#4361ee" stroke-width="1"/>
                                    <text x="195" y="120" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">ユーザーテーブル</text>
                                    <rect x="130" y="130" width="130" height="20" fill="#f8f9fa" stroke="#4361ee" stroke-width="1"/>
                                    <text x="140" y="144" font-family="'Fira Code', monospace" font-size="10">id, name, email</text>
                                    <rect x="130" y="150" width="130" height="20" fill="white" stroke="#4361ee" stroke-width="1"/>
                                    <text x="140" y="164" font-family="'Fira Code', monospace" font-size="10">1, 山田, yamada@...</text>
                                    <rect x="130" y="170" width="130" height="20" fill="#f8f9fa" stroke="#4361ee" stroke-width="1"/>
                                    <text x="140" y="184" font-family="'Fira Code', monospace" font-size="10">2, 佐藤, sato@...</text>
                                    
                                    <rect x="280" y="100" width="150" height="110" rx="5" ry="5" fill="white" stroke="#4361ee" stroke-width="1"/>
                                    <text x="355" y="120" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">投稿テーブル</text>
                                    <rect x="290" y="130" width="130" height="20" fill="#f8f9fa" stroke="#4361ee" stroke-width="1"/>
                                    <text x="300" y="144" font-family="'Fira Code', monospace" font-size="10">id, user_id, text</text>
                                    <rect x="290" y="150" width="130" height="20" fill="white" stroke="#4361ee" stroke-width="1"/>
                                    <text x="300" y="164" font-family="'Fira Code', monospace" font-size="10">1, 1, おはよう</text>
                                    <rect x="290" y="170" width="130" height="20" fill="#f8f9fa" stroke="#4361ee" stroke-width="1"/>
                                    <text x="300" y="184" font-family="'Fira Code', monospace" font-size="10">2, 2, こんにちは</text>
                                    
                                    <path d="M 250 140 L 290 140" stroke="#4361ee" stroke-width="1" marker-end="url(#arrow2)"/>
                                    <text x="270" y="135" text-anchor="middle" font-family="'Fira Code', monospace" font-size="10">FK</text>
                                    
                                    <text x="275" y="220" text-anchor="middle" font-family="'Caveat', cursive" font-size="16" fill="#f72585">スキーマ定義、結合クエリ、トランザクション</text>
                                    
                                    <!-- NoSQLデータベース -->
                                    <rect x="550" y="50" width="350" height="180" rx="10" ry="10" fill="#fff3e0" stroke="#fca311" stroke-width="2"/>
                                    <text x="725" y="80" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#fca311">NoSQLデータベース</text>
                                    
                                    <rect x="570" y="100" width="150" height="110" rx="5" ry="5" fill="white" stroke="#fca311" stroke-width="1"/>
                                    <text x="645" y="120" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">ユーザードキュメント</text>
                                    <rect x="580" y="130" width="130" height="70" fill="#f8f9fa" stroke="#fca311" stroke-width="1"/>
                                    <text x="590" y="144" font-family="'Fira Code', monospace" font-size="10">{</text>
                                    <text x="595" y="156" font-family="'Fira Code', monospace" font-size="10">  "id": "user_1",</text>
                                    <text x="595" y="168" font-family="'Fira Code', monospace" font-size="10">  "name": "山田",</text>
                                    <text x="595" y="180" font-family="'Fira Code', monospace" font-size="10">  "email": "y@..."</text>
                                    <text x="590" y="192" font-family="'Fira Code', monospace" font-size="10">}</text>
                                    
                                    <rect x="730" y="100" width="150" height="110" rx="5" ry="5" fill="white" stroke="#fca311" stroke-width="1"/>
                                    <text x="805" y="120" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">投稿ドキュメント</text>
                                    <rect x="740" y="130" width="130" height="70" fill="#f8f9fa" stroke="#fca311" stroke-width="1"/>
                                    <text x="750" y="144" font-family="'Fira Code', monospace" font-size="10">{</text>
                                    <text x="755" y="156" font-family="'Fira Code', monospace" font-size="10">  "id": "post_1",</text>
                                    <text x="755" y="168" font-family="'Fira Code', monospace" font-size="10">  "userId": "user_1",</text>
                                    <text x="755" y="180" font-family="'Fira Code', monospace" font-size="10">  "text": "おはよう"</text>
                                    <text x="750" y="192" font-family="'Fira Code', monospace" font-size="10">}</text>
                                    
                                    <text x="725" y="220" text-anchor="middle" font-family="'Caveat', cursive" font-size="16" fill="#f72585">スキーマレス、水平スケーリング、柔軟性</text>
                                    
                                    <!-- 小規模アプリケーション -->
                                    <rect x="100" y="280" width="250" height="180" rx="10" ry="10" fill="#c9f7f5" stroke="#2a9d8f" stroke-width="2"/>
                                    <text x="225" y="310" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#2a9d8f">小〜中規模アプリ向き</text>
                                    
                                    <text x="130" y="340" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ SQLite</text>
                                    <text x="130" y="370" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ MySQL</text>
                                    <text x="130" y="400" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ PostgreSQL</text>
                                    <text x="130" y="430" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ Firebase Realtime DB</text>
                                    
                                    <text x="225" y="450" text-anchor="middle" font-family="'Caveat', cursive" font-size="16" fill="#f72585">導入が容易、安定性</text>
                                    
                                    <!-- 大規模アプリケーション -->
                                    <rect x="400" y="280" width="250" height="180" rx="10" ry="10" fill="#ffccd5" stroke="#f72585" stroke-width="2"/>
                                    <text x="525" y="310" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#f72585">大規模アプリ向き</text>
                                    
                                    <text x="430" y="340" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ MongoDB</text>
                                    <text x="430" y="370" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ Amazon DynamoDB</text>
                                    <text x="430" y="400" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ Google Cloud Firestore</text>
                                    <text x="430" y="430" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ Cassandra</text>
                                    
                                    <text x="525" y="450" text-anchor="middle" font-family="'Caveat', cursive" font-size="16" fill="#f72585">高パフォーマンス、スケーラビリティ</text>
                                    
                                    <!-- 特定用途向け -->
                                    <rect x="700" y="280" width="250" height="180" rx="10" ry="10" fill="#dccff7" stroke="#7209b7" stroke-width="2"/>
                                    <text x="825" y="310" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="18" fill="#7209b7">特定用途向き</text>
                                    
                                    <text x="730" y="340" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ Redis (キャッシュ)</text>
                                    <text x="730" y="370" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ Elasticsearch (検索)</text>
                                    <text x="730" y="400" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ Neo4j (グラフDB)</text>
                                    <text x="730" y="430" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">✓ InfluxDB (時系列データ)</text>
                                    
                                    <text x="825" y="450" text-anchor="middle" font-family="'Caveat', cursive" font-size="16" fill="#f72585">特化した機能、パフォーマンス</text>
                                    
                                    <!-- Arrow definition -->
                                    <defs>
                                        <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                            <path d="M0,0 L0,6 L9,3 z" fill="#4361ee" />
                                        </marker>
                                    </defs>
                                </svg>
                            </div>
                        </div>
                        
                        <h4>非エンジニア向けのデータベース選択ガイド</h4>
                        <p>データベースの選択は、サービスの規模や要件によって異なります。非エンジニアが取り組みやすいデータベースを中心に紹介します。</p>
                        
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>データベース</th>
                                        <th>種類</th>
                                        <th>特徴</th>
                                        <th>適したユースケース</th>
                                        <th>難易度</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Firebase Firestore</td>
                                        <td>NoSQL</td>
                                        <td>クラウドベース、リアルタイム同期、スケーラブル</td>
                                        <td>モバイルアプリ、リアルタイム機能を持つWebアプリ</td>
                                        <td>低</td>
                                    </tr>
                                    <tr>
                                        <td>Supabase</td>
                                        <td>リレーショナル<br>(PostgreSQL)</td>
                                        <td>Firebaseライクなインターフェースでリレーショナルの利点を活かす</td>
                                        <td>構造化データ、複雑なクエリが必要なアプリ</td>
                                        <td>低〜中</td>
                                    </tr>
                                    <tr>
                                        <td>MongoDB Atlas</td>
                                        <td>NoSQL</td>
                                        <td>ドキュメント指向、フレキシブルなスキーマ</td>
                                        <td>頻繁に構造が変わるデータ、高速な開発</td>
                                        <td>中</td>
                                    </tr>
                                    <tr>
                                        <td>SQLite</td>
                                        <td>リレーショナル</td>
                                        <td>ファイルベース、軽量、設定不要</td>
                                        <td>小規模アプリ、プロトタイプ開発</td>
                                        <td>中</td>
                                    </tr>
                                    <tr>
                                        <td>PlanetScale</td>
                                        <td>リレーショナル<br>(MySQL)</td>
                                        <td>サーバーレス、高スケーラブル、開発者フレンドリー</td>
                                        <td>信頼性とスケーラビリティが必要なアプリ</td>
                                        <td>中</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="tip">
                            <h4>💡 初心者へのアドバイス</h4>
                            <p>Firebase FirestoreやSupabaseから始めることをおすすめします。これらのサービスは直感的なインターフェースを提供し、複雑なデータベース管理の知識がなくても使いこなせます。また、認証や保存など他のバックエンド機能も統合されているため、開発がスムーズに進みます。</p>
                        </div>
                        
                        <h4>Firebase Firestoreの基本的な使い方</h4>
                        <p>非エンジニアでも比較的取り組みやすいFirebase Firestoreを例に、基本的なデータベース操作を説明します。</p>
                        
                        <div class="code-block" data-language="JavaScript">
// Firebase Firestoreの基本的なCRUD操作
import { initializeApp } from 'firebase/app';
import { 
  getFirestore, 
  collection, 
  doc, 
  setDoc,
  addDoc, 
  getDoc, 
  getDocs,
  updateDoc, 
  deleteDoc,
  query,
  where,
  orderBy,
  limit
} from 'firebase/firestore';

// Firebaseの初期化
const firebaseConfig = {
  // あなたのFirebase設定
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// データの作成（ドキュメントIDを指定）
async function createUserWithId(userId, userData) {
  try {
    // usersコレクション内の特定のドキュメントを参照
    const userRef = doc(db, 'users', userId);
    
    // ドキュメントの作成または上書き
    await setDoc(userRef, {
      name: userData.name,
      email: userData.email,
      createdAt: new Date()
    });
    
    console.log('ユーザーが作成されました。ID:', userId);
    return userId;
  } catch (error) {
    console.error('ユーザー作成エラー:', error);
    throw error;
  }
}

// データの作成（自動ID生成）
async function createUser(userData) {
  try {
    // usersコレクションを参照
    const usersCollectionRef = collection(db, 'users');
    
    // 新しいドキュメントを追加（IDは自動生成）
    const docRef = await addDoc(usersCollectionRef, {
      name: userData.name,
      email: userData.email,
      createdAt: new Date()
    });
    
    console.log('ユーザーが作成されました。ID:', docRef.id);
    return docRef.id;
  } catch (error) {
    console.error('ユーザー作成エラー:', error);
    throw error;
  }
}

// 特定のデータの取得
async function getUser(userId) {
  try {
    // ドキュメントの参照
    const userRef = doc(db, 'users', userId);
    
    // ドキュメントの取得
    const userSnap = await getDoc(userRef);
    
    if (userSnap.exists()) {
      // ドキュメントが存在する場合
      const userData = userSnap.data();
      console.log('取得したユーザー:', userData);
      return { id: userSnap.id, ...userData };
    } else {
      // ドキュメントが存在しない場合
      console.log('ユーザーが見つかりません');
      return null;
    }
  } catch (error) {
    console.error('ユーザー取得エラー:', error);
    throw error;
  }
}

// 複数のデータの取得
async function getAllUsers() {
  try {
    // コレクションの参照
    const usersCollectionRef = collection(db, 'users');
    
    // コレクション内の全ドキュメントを取得
    const querySnapshot = await getDocs(usersCollectionRef);
    
    const users = [];
    querySnapshot.forEach((doc) => {
      users.push({ id: doc.id, ...doc.data() });
    });
    
    console.log('全ユーザー:', users);
    return users;
  } catch (error) {
    console.error('ユーザー一覧取得エラー:', error);
    throw error;
  }
}

// データの更新
async function updateUser(userId, newData) {
  try {
    // ドキュメントの参照
    const userRef = doc(db, 'users', userId);
    
    // ドキュメントの更新（指定したフィールドのみ更新）
    await updateDoc(userRef, {
      name: newData.name,
      email: newData.email,
      updatedAt: new Date()
    });
    
    console.log('ユーザー情報が更新されました。ID:', userId);
    return userId;
  } catch (error) {
    console.error('ユーザー更新エラー:', error);
    throw error;
  }
}

// データの削除
async function deleteUser(userId) {
  try {
    // ドキュメントの参照
    const userRef = doc(db, 'users', userId);
    
    // ドキュメントの削除
    await deleteDoc(userRef);
    
    console.log('ユーザーが削除されました。ID:', userId);
    return userId;
  } catch (error) {
    console.error('ユーザー削除エラー:', error);
    throw error;
  }
}

// クエリの例：条件に一致するデータの取得
async function getUsersByCondition(condition) {
  try {
    // コレクションの参照
    const usersCollectionRef = collection(db, 'users');
    
    // クエリの構築
    const q = query(
      usersCollectionRef,
      where('age', '>=', 20),        // 20歳以上
      orderBy('age', 'desc'),        // 年齢の降順
      limit(10)                      // 最大10件
    );
    
    // クエリの実行
    const querySnapshot = await getDocs(q);
    
    const users = [];
    querySnapshot.forEach((doc) => {
      users.push({ id: doc.id, ...doc.data() });
    });
    
    console.log('条件に一致するユーザー:', users);
    return users;
  } catch (error) {
    console.error('ユーザー検索エラー:', error);
    throw error;
  }
}

// サブコレクションの例：ユーザーの投稿を取得
async function getUserPosts(userId) {
  try {
    // サブコレクションの参照
    const postsCollectionRef = collection(db, 'users', userId, 'posts');
    
    // サブコレクション内の全ドキュメントを取得
    const querySnapshot = await getDocs(postsCollectionRef);
    
    const posts = [];
    querySnapshot.forEach((doc) => {
      posts.push({ id: doc.id, ...doc.data() });
    });
    
    console.log(`ユーザー ${userId} の投稿:`, posts);
    return posts;
  } catch (error) {
    console.error('投稿取得エラー:', error);
    throw error;
  }
}
                        </div>
                        
                        <h4>データベース設計のベストプラクティス</h4>
                        <p>効率的でスケーラブルなデータベースを設計するためのポイントを紹介します。</p>
                        
                        <div class="feature-grid">
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(67, 97, 238, 0.1); color: #4361ee;">📊</div>
                                <h5 class="feature-title">データモデリング</h5>
                                <p>リレーショナルDBの場合は正規化（データの重複を減らす）を、NoSQLの場合はデータアクセスパターンに合わせた設計を心がけましょう。</p>
                                <p>特にNoSQLでは、クエリパターンを先に考え、それに最適化された構造にすることが重要です。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(76, 201, 240, 0.1); color: #4cc9f0;">🔍</div>
                                <h5 class="feature-title">インデックス戦略</h5>
                                <p>頻繁に検索する条件にはインデックスを設定することで、クエリのパフォーマンスが大幅に向上します。</p>
                                <p>ただし、インデックスは書き込み性能に影響するため、必要なものだけに限定しましょう。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(252, 163, 17, 0.1); color: #fca311;">🔒</div>
                                <h5 class="feature-title">セキュリティルール</h5>
                                <p>Firebase/Supabaseなどでは、データベースアクセスのセキュリティルールを設定できます。</p>
                                <p>「誰がどのデータにアクセスできるか」を明確に定義し、不正アクセスを防止しましょう。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(247, 37, 133, 0.1); color: #f72585;">⚡</div>
                                <h5 class="feature-title">パフォーマンス最適化</h5>
                                <p>大きなデータセットを小さなチャンクに分割する、不要なデータをフィルタリングする、必要に応じてデータを非正規化するなどの工夫が有効です。</p>
                                <p>特にリアルタイムアプリでは、データ構造の最適化が重要です。</p>
                            </div>
                        </div>
                        
                        <div class="notes">
                            <h4>📝 NoSQLデータベースの設計ポイント</h4>
                            <p>NoSQLデータベース（特にFirestoreなど）では、リレーショナルデータベースとは異なる考え方が必要です：</p>
                            <ul>
                                <li><strong>デノーマライズ（非正規化）</strong>: 関連データを複数の場所に複製して保存することで、クエリのパフォーマンスを向上</li>
                                <li><strong>ネストされたデータ</strong>: 階層構造を活用して関連データをグループ化</li>
                                <li><strong>コレクションとサブコレクション</strong>: 1対多の関係を表現するためのパターン</li>
                                <li><strong>リファレンス</strong>: ドキュメント間の関係を参照で表現</li>
                            </ul>
                        </div>
                        
                        <div class="prompt-example">
Claudeさん、SNSアプリのためのFirestore（Firebase）データベース設計をお願いします。

アプリの機能：
1. ユーザー登録・プロフィール管理
2. 投稿機能（テキスト、画像）
3. いいね、コメント機能
4. フォロー/フォロワー機能
5. タイムライン表示（フォローしているユーザーの投稿）
6. 通知機能

以下の点について詳しく説明してください：
- コレクション構造の設計
- 各ドキュメントのデータ構造
- 効率的なクエリのための最適化
- セキュリティルールの設定例
- データの関連付け方法（リファレンスなど）
- パフォーマンスを考慮したデータ設計の工夫

特に、リアルタイムのタイムライン表示とフォロー/フォロワー関係の効率的な実装方法について重点的に説明してください。
                        </div>
                    </section>
                    
                    <section id="testing" class="content-section">
                        <h3>テストと検証</h3>
                        <p>バックエンドシステムのテストと検証は、信頼性の高いWebサービスを構築するために欠かせない工程です。適切なテスト戦略を導入することで、バグの早期発見やデプロイ時の問題リスクを軽減できます。</p>
                        
                        <h4>非エンジニア向けのテスト手法</h4>
                        <p>プログラミングの専門知識がなくても実施できるテスト方法を中心に紹介します。</p>
                        
                        <div class="feature-grid">
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(67, 97, 238, 0.1); color: #4361ee;">📋</div>
                                <h5 class="feature-title">手動テスト</h5>
                                <p>実際にアプリケーションを操作して、意図した通りに動作するかを検証する基本的なテスト方法です。</p>
                                <p>機能リストをチェックリスト化して、各機能が正常に動作するかを確認します。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(76, 201, 240, 0.1); color: #4cc9f0;">🔄</div>
                                <h5 class="feature-title">APIテスト</h5>
                                <p>Postman、Insomnia、Hurlなどのツールを使って、APIエンドポイントが正しく動作するかを検証します。</p>
                                <p>リクエストを送信し、レスポンスが期待通りかを確認するシンプルなテスト方法です。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(252, 163, 17, 0.1); color: #fca311;">👥</div>
                                <h5 class="feature-title">ユーザーテスト</h5>
                                <p>実際のユーザーや同僚にアプリケーションを試してもらい、フィードバックを得る方法です。</p>
                                <p>ユーザビリティの問題や予期しない使用パターンを発見できます。</p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(247, 37, 133, 0.1); color: #f72585;">📱</div>
                                <h5 class="feature-title">クロスデバイステスト</h5>
                                <p>異なるデバイス（スマートフォン、タブレット、デスクトップ）やブラウザでの動作確認です。</p>
                                <p>レスポンシブデザインが適切に機能しているかを確認します。</p>
                            </div>
                        </div>
                        
                        <h4>テスト計画の立て方</h4>
                        <p>効率的なテストを行うために、テスト計画を立てることが重要です。以下のフレームワークを参考にしてください。</p>
                        
                        <div class="steps-container">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h5 class="step-title">テスト対象の特定</h5>
                                    <p>アプリケーションのどの部分をテストするのかを明確にします。主要な機能、重要なユーザーフロー、既知の問題がある領域などを優先しましょう。</p>
                                    <ul>
                                        <li>ユーザー認証・登録フロー</li>
                                        <li>主要なデータ操作機能（CRUD）</li>
                                        <li>特権が必要な操作（管理者機能など）</li>
                                        <li>統合ポイント（外部APIとの連携など）</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h5 class="step-title">テストケースの作成</h5>
                                    <p>各機能に対するテストケースを作成します。正常系（正しく動作する場合）と異常系（エラーが発生する場合）の両方を考慮しましょう。</p>
                                    <div class="code-block" data-language="テストケース例">
// ユーザー登録機能のテストケース

// 正常系
- 有効なメールアドレスとパスワードで登録 → 成功
- 登録後にログインできる → 成功

// 異常系
- すでに使用されているメールアドレスで登録 → エラーメッセージ表示
- 短すぎるパスワードで登録 → バリデーションエラー
- 無効なメール形式で登録 → バリデーションエラー
- 必須フィールドを空で送信 → エラーメッセージ表示
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h5 class="step-title">テスト環境の準備</h5>
                                    <p>テスト用のデータや環境を準備します。本番環境には影響を与えないよう、テスト用の環境を用意しましょう。</p>
                                    <ul>
                                        <li>テスト用のFirebaseプロジェクトを作成</li>
                                        <li>テストデータの初期化スクリプトを準備</li>
                                        <li>テスト用のユーザーアカウントを作成</li>
                                    </ul>
                                    <div class="tip">
                                        <h4>💡 ヒント</h4>
                                        <p>Firebase、Supabaseなどのサービスでは、本番環境とは別に開発環境やステージング環境を簡単に作成できます。これらの環境を活用しましょう。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h5 class="step-title">APIテストの実行</h5>
                                    <p>Postmanなどのツールを使って、APIエンドポイントをテストします。リクエスト・レスポンスを記録し、問題があれば修正します。</p>
                                    <div class="code-block" data-language="Postmanテスト例">
// ユーザー登録APIのテスト

// リクエスト
POST https://api.example.com/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "Password123",
  "name": "Test User"
}

// 期待されるレスポンス
Status: 201 Created
{
  "message": "User registered successfully",
  "userId": "some-user-id"
}

// テスト内容
pm.test("Status code is 201", function() {
    pm.response.to.have.status(201);
});

pm.test("Response has userId", function() {
    const response = pm.response.json();
    pm.expect(response).to.have.property('userId');
});
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <h5 class="step-title">フロントエンドと統合してテスト</h5>
                                    <p>APIだけでなく、実際のフロントエンドと連携して動作確認を行います。ユーザーフローに沿ったテストを実施しましょう。</p>
                                    <ul>
                                        <li>登録からログイン、コンテンツ操作までの一連の流れ</li>
                                        <li>エラー表示やローディング状態の確認</li>
                                        <li>フォームのバリデーションの動作確認</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <h5 class="step-title">エッジケースのテスト</h5>
                                    <p>一般的なケースだけでなく、境界条件や例外的なケースもテストします。ユーザーが想定外の操作をした場合の挙動を確認しましょう。</p>
                                    <ul>
                                        <li>大量のデータを一度に処理する場合</li>
                                        <li>特殊文字やUnicodeを含むデータの処理</li>
                                        <li>ネットワーク接続が不安定な状況</li>
                                        <li>高負荷時の動作</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <h5 class="step-title">バグ修正と再テスト</h5>
                                    <p>発見された問題を修正し、修正後に再テストを行います。回帰テスト（以前の機能が正常に動作するか確認するテスト）も重要です。</p>
                                    <div class="tip">
                                        <h4>💡 ヒント</h4>
                                        <p>Claudeを活用して、発見したバグの修正コードを生成できます。問題の状況を具体的に説明し、考えられる解決策を求めましょう。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <h4>セキュリティテストのポイント</h4>
                        <p>バックエンドシステムのセキュリティは特に重要です。以下のポイントを確認しましょう。</p>
                        
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>テスト項目</th>
                                        <th>内容</th>
                                        <th>テスト方法</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>認証検証</td>
                                        <td>ログインが必要な機能が適切に保護されているか</td>
                                        <td>未認証の状態でAPIにアクセスを試みる</td>
                                    </tr>
                                    <tr>
                                        <td>権限確認</td>
                                        <td>ユーザーが自分のデータのみにアクセスできるか</td>
                                        <td>他のユーザーのデータへのアクセスを試みる</td>
                                    </tr>
                                    <tr>
                                        <td>入力検証</td>
                                        <td>不正な入力が適切に処理されるか</td>
                                        <td>SQLインジェクションやXSSを試みる</td>
                                    </tr>
                                    <tr>
                                        <td>データ保護</td>
                                        <td>機密データが適切に保護されているか</td>
                                        <td>パスワードがハッシュ化されているか確認</td>
                                    </tr>
                                    <tr>
                                        <td>HTTPS</td>
                                        <td>通信が暗号化されているか</td>
                                        <td>HTTP接続を試み、リダイレクトされるか確認</td>
                                    </tr>
                                    <tr>
                                        <td>レート制限</td>
                                        <td>短時間に大量のリクエストを制限しているか</td>
                                        <td>連続的にAPIにリクエストを送信</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="prompt-example">
Claudeさん、私はFirebaseを使ったSNSアプリのバックエンドをテストしたいと思います。効果的なテスト計画と実行方法を教えてください。

アプリの主要機能：
1. ユーザー登録・認証
2. 投稿作成・編集・削除
3. いいね・コメント機能
4. ユーザーフォロー機能
5. プロフィール編集

特に以下の点について詳しく説明してください：
- 手動テストで確認すべき重要なケース
- Postmanを使ったAPIテストの方法
- セキュリティ面でのテストポイント
- エッジケースや限界テスト
- テスト中に発見された問題の記録と追跡方法

また、非エンジニアでも実施できる簡単なテスト自動化の方法があれば、それも教えてください。
                        </div>
                    </section>
                    
                    <section id="deployment" class="content-section">
                        <h3>デプロイと運用</h3>
                        <p>開発したバックエンドシステムを実際に公開し、安定して運用するための方法を説明します。非エンジニアでも取り組みやすいデプロイ方法を中心に紹介します。</p>
                        
                        <h4>サーバーレスサービスのデプロイ</h4>
                        <p>Firebase、Supabaseなどのサーバーレスサービスを使用している場合のデプロイ方法です。</p>
                        
                        <div class="steps-container">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h5 class="step-title">環境設定</h5>
                                    <p>本番環境（Production）と開発環境（Development）を分けることが重要です。FirebaseやSupabaseでは、複数のプロジェクトを作成して環境を分けることができます。</p>
                                    <ul>
                                        <li>開発環境: 機能開発やテスト用</li>
                                        <li>ステージング環境（オプション）: 本番環境に近い設定でのテスト用</li>
                                        <li>本番環境: 実際のユーザーが使用する環境</li>
                                    </ul>
                                    <div class="tip">
                                        <h4>💡 ヒント</h4>
                                        <p>環境ごとに異なる設定（APIキーなど）を使用することで、誤って開発中のコードが本番環境に影響を与えることを防げます。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h5 class="step-title">Firebase Functionsのデプロイ</h5>
                                    <p>Firebase Cloud Functionsを使用している場合、Firebase CLIを使用してデプロイします。</p>
                                    <div class="code-block" data-language="Bash">
# Firebase CLIのインストール（初回のみ）
npm install -g firebase-tools

# Firebaseへのログイン
firebase login

# プロジェクトの選択
firebase use your-project-id

# Functionsのデプロイ
firebase deploy --only functions

# 特定の関数だけデプロイする場合
firebase deploy --only functions:functionName1,functions:functionName2
                                    </div>
                                    <div class="notes">
                                        <h4>📝 注意点</h4>
                                        <p>Cloud Functionsのデプロイには少し時間がかかることがあります。また、Firebaseの無料プランでは、関数の実行回数や外部ネットワーク接続に制限があることに注意してください。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h5 class="step-title">Firestoreのセキュリティルールのデプロイ</h5>
                                    <p>データベースのセキュリティルールをデプロイして、データのアクセス制御を設定します。</p>
                                    <div class="code-block" data-language="Bash">
# セキュリティルールのデプロイ
firebase deploy --only firestore:rules

# Storageのセキュリティルールもデプロイする場合
firebase deploy --only firestore:rules,storage:rules
                                    </div>
                                    <div class="code-block" data-language="JavaScript">
// firestore.rules の例
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ユーザープロフィール
    match /users/{userId} {
      allow read;  // 誰でも読み取り可能
      allow write: if request.auth != null && request.auth.uid == userId;  // 自分のプロフィールのみ編集可能
    }
    
    // 投稿
    match /posts/{postId} {
      allow read;  // 誰でも読み取り可能
      allow create: if request.auth != null;  // ログインユーザーのみ作成可能
      allow update, delete: if request.auth != null && request.auth.uid == resource.data.authorId;  // 投稿者のみ編集・削除可能
    }
  }
}
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h5 class="step-title">フロントエンドと統合</h5>
                                    <p>バックエンドをデプロイした後、フロントエンドアプリケーションから接続するための設定を行います。</p>
                                    <div class="code-block" data-language="JavaScript">
// フロントエンドでのFirebase設定
import { initializeApp } from 'firebase/app';

// 本番環境用の設定
const prodConfig = {
  apiKey: "YOUR_PROD_API_KEY",
  authDomain: "your-prod-app.firebaseapp.com",
  projectId: "your-prod-project",
  // その他の設定...
};

// 開発環境用の設定
const devConfig = {
  apiKey: "YOUR_DEV_API_KEY",
  authDomain: "your-dev-app.firebaseapp.com",
  projectId: "your-dev-project",
  // その他の設定...
};

// 環境に応じた設定を選択
const firebaseConfig = process.env.NODE_ENV === 'production' ? prodConfig : devConfig;

// Firebaseの初期化
const app = initializeApp(firebaseConfig);
                                    </div>
                                    <div class="tip">
                                        <h4>💡 ヒント</h4>
                                        <p>環境変数（.env）を使用して設定を管理すると、コード内に直接APIキーを書かなくて済みます。多くのホスティングサービスでは、環境変数の設定が可能です。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <h4>バックエンドの運用と監視</h4>
                        <p>デプロイ後のバックエンドシステムを安定して運用するためのポイントを紹介します。</p>
                        
                        <div class="feature-grid">
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(67, 97, 238, 0.1); color: #4361ee;">📊</div>
                                <h5 class="feature-title">パフォーマンス監視</h5>
                                <p>Firebase Consoleやクラウドサービスの管理コンソールで、サービスのパフォーマンスを定期的に確認します。</p>
                                <ul>
                                    <li>リクエスト数とレスポンス時間</li>
                                    <li>エラーの発生状況</li>
                                    <li>データベースの読み書き回数</li>
                                    <li>ストレージの使用量</li>
                                </ul>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(76, 201, 240, 0.1); color: #4cc9f0;">🔔</div>
                                <h5 class="feature-title">アラート設定</h5>
                                <p>異常や問題が発生した際に通知を受け取るためのアラートを設定します。</p>
                                <ul>
                                    <li>エラー率が閾値を超えた場合</li>
                                    <li>リソース使用量が上限に近づいた場合</li>
                                    <li>異常なトラフィックパターンの検出</li>
                                </ul>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(252, 163, 17, 0.1); color: #fca311;">💾</div>
                                <h5 class="feature-title">バックアップ戦略</h5>
                                <p>データの損失を防ぐための定期的なバックアップを設定します。</p>
                                <ul>
                                    <li>Firebase: Firestoreのエクスポート機能</li>
                                    <li>Supabase: データベースのバックアップ機能</li>
                                    <li>重要なデータの手動エクスポート</li>
                                </ul>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(247, 37, 133, 0.1); color: #f72585;">🔄</div>
                                <h5 class="feature-title">継続的な改善</h5>
                                <p>ユーザーフィードバックやパフォーマンスデータを基に、継続的にシステムを改善します。</p>
                                <ul>
                                    <li>ボトルネックの特定と最適化</li>
                                    <li>新機能の追加とテスト</li>
                                    <li>セキュリティアップデートの適用</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="notes">
                            <h4>📝 コスト管理のポイント</h4>
                            <p>クラウドサービスは使用量に応じて課金されることが多いため、コスト管理も重要です：</p>
                            <ul>
                                <li>予算アラートを設定して、予想外の高額請求を防止</li>
                                <li>不要なリソースや機能の削除</li>
                                <li>クエリの最適化によるデータベース操作の削減</li>
                                <li>無料枠の活用（多くのサービスは小規模アプリなら無料で利用可能）</li>
                            </ul>
                        </div>
                        
                        <h4>一般的な運用課題と解決策</h4>
                        
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>課題</th>
                                        <th>原因</th>
                                        <th>解決策</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>パフォーマンスの低下</td>
                                        <td>データベースクエリの非効率性、データ量の増加</td>
                                        <td>インデックスの最適化、クエリの見直し、データ構造の再設計</td>
                                    </tr>
                                    <tr>
                                        <td>認証の問題</td>
                                        <td>トークンの期限切れ、認証フローのバグ</td>
                                        <td>リフレッシュトークンの実装、ログインフローのテスト強化</td>
                                    </tr>
                                    <tr>
                                        <td>データ整合性の問題</td>
                                        <td>並行処理、トランザクション欠如</td>
                                        <td>トランザクション処理の導入、楽観的ロック機構の実装</td>
                                    </tr>
                                    <tr>
                                        <td>セキュリティ脆弱性</td>
                                        <td>セキュリティルールの不備、古いライブラリ</td>
                                        <td>定期的なセキュリティレビュー、依存関係の更新</td>
                                    </tr>
                                    <tr>
                                        <td>予期せぬコスト増加</td>
                                        <td>非効率なリソース使用、過剰なリクエスト</td>
                                        <td>キャッシング導入、クライアント側での処理増加、使用量監視</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="prompt-example">
Claudeさん、Firebaseで開発したSNSアプリを本番環境にデプロイする準備をしています。以下の点について詳しくアドバイスをください：

1. 開発環境から本番環境へのスムーズな移行手順
2. セキュリティルールの適切な設定方法と確認ポイント
3. Firebase Functionsのデプロイ方法と注意点
4. 本番環境のパフォーマンス監視方法
5. コスト管理の戦略とベストプラクティス
6. バックアップと災害復旧計画
7. スケーリングに関する考慮点
8. デプロイ後によくある問題とその解決方法

特に、非エンジニアでも実施できる具体的な手順と、忘れがちだけど重要なポイントを教えてください。また、本番環境で突然エラーが発生した場合の対処法についても説明していただけると助かります。
                        </div>
                    </section>
                    
                    <section id="Claude-techniques" class="content-section">
                        <h3>Claude活用テクニック</h3>
                        <p>Claude 3.7を効果的に活用することで、バックエンド開発のハードルを大幅に下げることができます。ここでは、バックエンド開発におけるClaudeの有効な活用方法を紹介します。</p>
                        
                        <h4>バックエンド開発に役立つプロンプト例</h4>
                        <p>以下のプロンプトテンプレートを参考に、プロジェクトに合わせてカスタマイズして使用してください。</p>
                        
                        <div class="feature-grid">
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(67, 97, 238, 0.1); color: #4361ee;">🏗️</div>
                                <h5 class="feature-title">アーキテクチャ設計</h5>
                                <div class="code-block" data-language="プロンプト例">
Claudeさん、[サービスの種類]のバックエンドアーキテクチャを設計してください。

以下の要件があります：
- 主な機能: [機能1, 機能2, ...]
- 想定ユーザー数: [数字]
- 予算: [予算情報]
- 技術的制約: [ある場合は記載]

特に以下の点について詳しく説明してください：
1. サーバーレスか従来型サーバーか、およびその理由
2. 適したデータベースの種類とその根拠
3. 主要なAPIエンドポイント
4. セキュリティの考慮点
5. スケーラビリティ対策

私はプログラミング初心者なので、シンプルで実装しやすいアーキテクチャが望ましいです。
                                </div>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(76, 201, 240, 0.1); color: #4cc9f0;">📝</div>
                                <h5 class="feature-title">データモデル設計</h5>
                                <div class="code-block" data-language="プロンプト例">
Claudeさん、[サービスの種類]のためのFirebase Firestoreデータモデルを設計してください。

アプリには以下の機能があります：
- [機能1]
- [機能2]
- [機能3]
...

各データモデルに含めるべきフィールド、コレクション構造、データ間の関連付け方法を詳しく説明してください。また、クエリパフォーマンスを最適化するための戦略も含めてください。

設計図を視覚的に表現し、データフローも示してください。
                                </div>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(252, 163, 17, 0.1); color: #fca311;">🔐</div>
                                <h5 class="feature-title">セキュリティルールの作成</h5>
                                <div class="code-block" data-language="プロンプト例">
Claudeさん、Firebase Firestoreのセキュリティルールを作成してください。

以下のコレクション構造があります：
- users: ユーザープロフィール情報
- posts: ユーザーの投稿
- comments: 投稿へのコメント
- likes: いいね情報
- followings: フォロー関係

以下の要件に基づいてセキュリティルールを設定してください：
1. ユーザーは自分のプロフィールのみ編集可能
2. ログインユーザーのみ投稿可能
3. 投稿者のみ自分の投稿を編集・削除可能
4. コメントは投稿者のみ編集・削除可能
5. 管理者ユーザーは全データにアクセス可能

各ルールの説明と、具体的なコードを提供してください。
                                </div>
                            </div>

                          <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(247, 37, 133, 0.1); color: #f72585;">⚡</div>
                                <h5 class="feature-title">Cloud Functions実装</h5>
                                <div class="code-block" data-language="プロンプト例">
Claudeさん、Firebase Cloud Functionsで以下の機能を実装したいと思います：

機能内容：[機能の詳細な説明]
トリガー条件：[いつ関数が実行されるか]
入力データ：[関数が受け取るデータ]
期待される出力：[関数が返すべき結果]
エラー処理：[考慮すべきエラーケース]

Node.js（JavaScript）での実装コードを提供してください。コメントを多めに入れて、各部分の役割が分かりやすいようにしてください。また、デプロイ方法やテスト方法についても簡単に説明していただけると助かります。
                                </div>
                            </div>
                        </div>
                        
                        <h4>バックエンド機能実装のためのプロンプトパターン</h4>
                        <p>特定のバックエンド機能を実装するための効果的なプロンプトパターンを紹介します。</p>
                        
                        <div class="steps-container">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h5 class="step-title">APIエンドポイントの実装</h5>
                                    <div class="code-block" data-language="プロンプト例">
Claudeさん、Express.jsを使って[機能名]のAPIエンドポイントを実装したいと思います。

エンドポイントの詳細:
- メソッド: [GET/POST/PUT/DELETE]
- URL: /api/[リソース名]
- 機能: [機能の詳細な説明]
- 必要なパラメータ: [リクエストに含めるべきパラメータ]
- レスポンス形式: [期待されるレスポンスのJSON構造]
- エラーハンドリング: [考慮すべきエラーケース]

以下の点も含めてください:
1. 入力バリデーション
2. データベース操作（Firestoreを使用）
3. エラー処理とステータスコード
4. セキュリティ考慮点

コードは詳細なコメント付きで提供してください。
                                    </div>
                                    <div class="tip">
                                        <h4>💡 ヒント</h4>
                                        <p>APIエンドポイントは、リクエストの処理からレスポンス返却までの全フローを明確に指定すると、より実装しやすいコードが生成されます。</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h5 class="step-title">認証機能の実装</h5>
                                    <div class="code-block" data-language="プロンプト例">
Claudeさん、[言語/フレームワーク]を使用してJWTベースの認証システムを実装したいと思います。

以下の機能が必要です:
1. ユーザー登録エンドポイント
2. ログインエンドポイント（JWTトークン発行）
3. トークン検証ミドルウェア
4. パスワードリセット機能
5. ユーザープロフィール取得エンドポイント

各機能について実装コードとAPI仕様を提供してください。また、セキュリティのベストプラクティスや、認証フローの全体像も説明していただけると助かります。

Firebase Authenticationとの連携方法も知りたいです。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h5 class="step-title">ファイルアップロード機能</h5>
                                    <div class="code-block" data-language="プロンプト例">
Claudeさん、Firebase Storageを使用して画像アップロード機能を実装したいと思います。

実装したい機能:
- ユーザーがプロフィール画像をアップロード
- 画像のリサイズと最適化
- 安全なストレージルールの設定
- アップロード進捗状況の表示
- エラーハンドリング

クライアント側とサーバー側の両方のコードを提供してください。また、以下の点についても説明をお願いします:
1. サポートするファイル形式と制限
2. セキュリティ上の考慮点
3. アップロードの最適化テクニック
4. ファイルの命名規則とパス構造
                                    </div>
                                </div>
                            </div>
                            
                            <div class="step-item">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h5 class="step-title">外部APIとの連携</h5>
                                    <div class="code-block" data-language="プロンプト例">
Claudeさん、Node.jsで[外部API名]と連携する機能を実装したいと思います。

実装したい機能:
- [外部API]からデータを取得
- 取得したデータを処理して自社データベースに保存
- 定期的なデータ同期（1日1回）
- エラー処理とリトライメカニズム

以下の点についても説明してください:
1. APIキーの安全な管理方法
2. レート制限の対処法
3. エラーログとモニタリング
4. キャッシュ戦略
5. Firebase Cloud Functionsでの実装方法

具体的なコード例と実装フローの図解をお願いします。
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <h4>デバッグと問題解決のためのプロンプト</h4>
                        <p>バックエンド開発中に発生した問題を効率的に解決するためのプロンプトパターンです。</p>
                        
                        <div class="feature-grid">
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(67, 97, 238, 0.1); color: #4361ee;">🔍</div>
                                <h5 class="feature-title">エラー診断と解決</h5>
                                <div class="code-block" data-language="プロンプト例">
Claudeさん、以下のエラーメッセージが表示されていて困っています。原因と解決策を教えてください。

エラーメッセージ:
```
[エラーメッセージをここに貼り付け]
```

発生状況:
- 実行環境: [Firebase Functions, Node.js v14など]
- 発生タイミング: [いつエラーが発生するか]
- 関連コード: 
```javascript
// 問題のあるコードをここに貼り付け
```

試したこと:
- [すでに試した解決策があれば記載]

どのような原因が考えられるか、また具体的な修正方法を示してください。
                                </div>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(76, 201, 240, 0.1); color: #4cc9f0;">⚡</div>
                                <h5 class="feature-title">パフォーマンス最適化</h5>
                                <div class="code-block" data-language="プロンプト例">
Claudeさん、以下のバックエンドコードのパフォーマンスを改善したいと思います。

現在の問題点:
- レスポンス時間が遅い（平均2秒）
- データベースクエリが多い
- メモリ使用量が高い

コード:
```javascript
// 最適化したいコードをここに貼り付け
```

以下の点を考慮して最適化案を提案してください:
1. データベースクエリの削減
2. キャッシング戦略
3. 非同期処理の最適化
4. 不要な計算の削減

Before/Afterの形で、改善されたコードと期待される効果を説明してください。
                                </div>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(252, 163, 17, 0.1); color: #fca311;">🔐</div>
                                <h5 class="feature-title">セキュリティ監査</h5>
                                <div class="code-block" data-language="プロンプト例">
Claudeさん、以下のバックエンドコードにセキュリティ上の問題がないかレビューしてください。

コード:
```javascript
// レビューしてほしいコードをここに貼り付け
```

特に以下の点を確認してください:
1. 認証とアクセス制御の問題
2. インジェクション攻撃の脆弱性
3. 機密情報の漏洩リスク
4. レート制限の欠如
5. その他のセキュリティリスク

問題点と改善案を具体的に説明してください。また、現代的なセキュリティのベストプラクティスに基づいた修正コードも提案してください。
                                </div>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(247, 37, 133, 0.1); color: #f72585;">🔄</div>
                                <h5 class="feature-title">コードリファクタリング</h5>
                                <div class="code-block" data-language="プロンプト例">
Claudeさん、以下のバックエンドコードをよりメンテナンス性の高いコードにリファクタリングしてください。

現在の問題点:
- コードの重複が多い
- 関数が長すぎる
- エラー処理が不十分
- ドキュメントが不足している

コード:
```javascript
// リファクタリングしたいコードをここに貼り付け
```

以下の原則に基づいてリファクタリングしてください:
1. DRY原則（Don't Repeat Yourself）
2. 単一責任の原則
3. 関数の分割と再利用
4. 適切な命名規則
5. エラー処理の強化
6. コメントとドキュメントの追加

リファクタリング後のコードと、変更点の説明を提供してください。
                                </div>
                            </div>
                        </div>
                        
                        <h4>コード生成と改善のためのベストプラクティス</h4>
                        <p>Claudeを活用してより質の高いバックエンドコードを生成するためのヒントです。</p>
                        
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>アプローチ</th>
                                        <th>効果的なプロンプト例</th>
                                        <th>避けるべきパターン</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>段階的な開発</td>
                                        <td>"まず基本的なCRUD機能を実装し、その後認証を追加したいと思います"</td>
                                        <td>"すべての機能を一度に実装してください"</td>
                                    </tr>
                                    <tr>
                                        <td>具体的な要件提示</td>
                                        <td>"ユーザーはメールアドレスとパスワードで登録し、JWTトークンを取得します"</td>
                                        <td>"認証機能を実装してください"</td>
                                    </tr>
                                    <tr>
                                        <td>コンテキスト情報の提供</td>
                                        <td>"このコードはFirebase Functionsで動作し、Firestoreと連携します"</td>
                                        <td>"この関数を改善してください"</td>
                                    </tr>
                                    <tr>
                                        <td>エラーケースの考慮</td>
                                        <td>"ネットワークエラー、認証失敗、データ不存在の場合の処理も含めてください"</td>
                                        <td>"基本機能だけ実装してください"</td>
                                    </tr>
                                    <tr>
                                        <td>セキュリティの重視</td>
                                        <td>"入力検証、認証チェック、セキュリティルールを含めてください"</td>
                                        <td>"とりあえず動く実装だけで良いです"</td>
                                    </tr>
                                    <tr>
                                        <td>イテレーティブな改善</td>
                                        <td>"この実装のパフォーマンスを向上させるための3つの方法を提案してください"</td>
                                        <td>"完璧なコードを一度に作ってください"</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="notes">
                            <h4>📝 コード改善のサイクル</h4>
                            <p>バックエンドコードの品質を向上させるには、以下のサイクルが効果的です：</p>
                            <ol>
                                <li>基本実装をClaudeに生成してもらう</li>
                                <li>コードを確認し、不明点があれば質問する</li>
                                <li>セキュリティ、パフォーマンス、エラー処理の観点でレビューを依頼する</li>
                                <li>改善提案を適用する</li>
                                <li>テストケースを追加する</li>
                                <li>実際の環境で動作確認し、問題があれば再度改善を依頼する</li>
                            </ol>
                            <p>このサイクルを繰り返すことで、段階的に高品質なコードに近づけることができます。</p>
                        </div>
                        
                        <div class="prompt-example">
Claudeさん、以下のNode.js+Expressコードをコードレビューしてください。セキュリティ、エラー処理、パフォーマンス、コード構造の観点から問題点を指摘し、改善案を提案してください。

```javascript
const express = require('express');
const admin = require('firebase-admin');
const app = express();

admin.initializeApp();
const db = admin.firestore();

app.use(express.json());

// ユーザー一覧を取得
app.get('/api/users', async (req, res) => {
  const snapshot = await db.collection('users').get();
  const users = [];
  snapshot.forEach(doc => {
    users.push({ id: doc.id, ...doc.data() });
  });
  res.json(users);
});

// ユーザー登録
app.post('/api/users', async (req, res) => {
  const { name, email, password } = req.body;
  const userRecord = await admin.auth().createUser({
    email,
    password,
    displayName: name
  });
  
  await db.collection('users').doc(userRecord.uid).set({
    name,
    email,
    role: 'user',
    createdAt: admin.firestore.FieldValue.serverTimestamp()
  });
  
  res.status(201).json({ id: userRecord.uid });
});

// ユーザーデータを更新
app.put('/api/users/:id', async (req, res) => {
  const { name, email } = req.body;
  await db.collection('users').doc(req.params.id).update({
    name,
    email,
    updatedAt: admin.firestore.FieldValue.serverTimestamp()
  });
  
  res.json({ message: 'User updated' });
});

// ユーザーを削除
app.delete('/api/users/:id', async (req, res) => {
  await db.collection('users').doc(req.params.id).delete();
  await admin.auth().deleteUser(req.params.id);
  
  res.json({ message: 'User deleted' });
});

app.listen(3000, () => {
  console.log('Server running on port 3000');
});
```

問題点だけでなく、具体的な修正コードも提示してください。また、現代的なベストプラクティスに基づいた追加の改善提案もあれば教えてください。
                        </div>
                    </section>
                    
                    <section class="content-section">
                        <h3>まとめと次のステップ</h3>
                        <p>バックエンド開発は、Webサービスの中核となる重要な部分です。しかし、サーバーレスサービスとAIアシスタントの活用により、非エンジニアでも実装可能になっています。</p>
                        
                        <div class="gr-container">
                            <h3 class="gr-title">バックエンド開発の学習ロードマップ</h3>
                            <div class="gr-content">
                                <svg viewBox="0 0 1000 300" width="100%" height="auto">
                                    <!-- 背景グリッド -->
                                    <defs>
                                        <pattern id="smallGrid6" width="10" height="10" patternUnits="userSpaceOnUse">
                                            <path d="M 10 0 L 0 0 0 10" fill="none" stroke="#f0f0f0" stroke-width="0.5"/>
                                        </pattern>
                                        <pattern id="grid6" width="100" height="100" patternUnits="userSpaceOnUse">
                                            <rect width="100" height="100" fill="url(#smallGrid6)"/>
                                            <path d="M 100 0 L 0 0 0 100" fill="none" stroke="#e0e0e0" stroke-width="1"/>
                                        </pattern>
                                    </defs>
                                    <rect width="100%" height="100%" fill="url(#grid6)" />
                                    
                                    <!-- 基礎 -->
                                    <rect x="50" y="120" width="150" height="80" rx="10" ry="10" fill="#e3f2fd" stroke="#4361ee" stroke-width="2"/>
                                    <text x="125" y="160" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">基礎知識</text>
                                    <text x="125" y="185" text-anchor="middle" font-family="'Caveat', cursive" font-size="14" fill="#f72585">APIの概念、HTTP基礎</text>
                                    
                                    <!-- 実装 -->
                                    <rect x="250" y="120" width="150" height="80" rx="10" ry="10" fill="#fff3e0" stroke="#fca311" stroke-width="2"/>
                                    <text x="325" y="160" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">サーバーレス実装</text>
                                    <text x="325" y="185" text-anchor="middle" font-family="'Caveat', cursive" font-size="14" fill="#f72585">Firebase, Supabase</text>
                                    
                                    <!-- データベース -->
                                    <rect x="450" y="120" width="150" height="80" rx="10" ry="10" fill="#e0f7fa" stroke="#7209b7" stroke-width="2"/>
                                    <text x="525" y="160" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">データモデリング</text>
                                    <text x="525" y="185" text-anchor="middle" font-family="'Caveat', cursive" font-size="14" fill="#f72585">NoSQL設計、クエリ最適化</text>
                                    
                                    <!-- 認証 -->
                                    <rect x="650" y="120" width="150" height="80" rx="10" ry="10" fill="#ffccd5" stroke="#f72585" stroke-width="2"/>
                                    <text x="725" y="160" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">認証とセキュリティ</text>
                                    <text x="725" y="185" text-anchor="middle" font-family="'Caveat', cursive" font-size="14" fill="#f72585">JWT, OAuth, セキュリティルール</text>
                                    
                                    <!-- 応用 -->
                                    <rect x="850" y="120" width="150" height="80" rx="10" ry="10" fill="#c9f7f5" stroke="#2a9d8f" stroke-width="2"/>
                                    <text x="925" y="160" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="16">カスタム拡張</text>
                                    <text x="925" y="185" text-anchor="middle" font-family="'Caveat', cursive" font-size="14" fill="#f72585">Cloud Functions, API連携</text>
                                    
                                    <!-- 矢印 -->
                                    <path d="M 200 160 L 250 160" stroke="#343a40" stroke-width="2" marker-end="url(#arrow3)"/>
                                    <path d="M 400 160 L 450 160" stroke="#343a40" stroke-width="2" marker-end="url(#arrow3)"/>
                                    <path d="M 600 160 L 650 160" stroke="#343a40" stroke-width="2" marker-end="url(#arrow3)"/>
                                    <path d="M 800 160 L 850 160" stroke="#343a40" stroke-width="2" marker-end="url(#arrow3)"/>
                                    
                                    <!-- Claude -->
                                    <rect x="425" y="30" width="200" height="60" rx="10" ry="10" fill="#f5f5f5" stroke="#f72585" stroke-width="2" stroke-dasharray="5,2"/>
                                    <text x="525" y="60" text-anchor="middle" font-family="'Caveat', cursive" font-size="20" fill="#f72585">Claude 3.7</text>
                                    <text x="525" y="80" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">各ステップをサポート</text>
                                    
                                    <!-- 接続線 -->
                                    <path d="M 525 90 L 525 120" stroke="#f72585" stroke-width="1.5" stroke-dasharray="4,2"/>
                                    <path d="M 450 90 L 325 120" stroke="#f72585" stroke-width="1.5" stroke-dasharray="4,2"/>
                                    <path d="M 600 90 L 725 120" stroke="#f72585" stroke-width="1.5" stroke-dasharray="4,2"/>
                                    <path d="M 400 90 L 125 120" stroke="#f72585" stroke-width="1.5" stroke-dasharray="4,2"/>
                                    <path d="M 650 90 L 925 120" stroke="#f72585" stroke-width="1.5" stroke-dasharray="4,2"/>
                                    
                                    <!-- 学習期間 -->
                                    <text x="125" y="240" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">1~2日</text>
                                    <text x="325" y="240" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">3~5日</text>
                                    <text x="525" y="240" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">2~3日</text>
                                    <text x="725" y="240" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">2~3日</text>
                                    <text x="925" y="240" text-anchor="middle" font-family="'M PLUS Rounded 1c', sans-serif" font-size="14">4~7日</text>
                                    
                                    <!-- Arrow definition -->
                                    <defs>
                                        <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                            <path d="M0,0 L0,6 L9,3 z" fill="#343a40" />
                                        </marker>
                                    </defs>
                                </svg>
                            </div>
                        </div>
                        
                        <h4>非エンジニアのためのバックエンド開発のポイント</h4>
                        <ul>
                            <li><strong>サーバーレスファースト</strong>: できるだけFirebaseなどのサーバーレスサービスを活用し、インフラ管理の複雑さを避ける</li>
                            <li><strong>段階的な学習</strong>: 基本的なデータ操作から始め、徐々に認証やセキュリティなどの複雑な概念に進む</li>
                            <li><strong>パターン活用</strong>: よく使われるパターン（CRUD操作、認証フロー等）を理解し、応用する</li>
                            <li><strong>テストの重視</strong>: 小さな機能ごとに動作確認し、問題を早期に発見する</li>
                            <li><strong>セキュリティ意識</strong>: データアクセス制御やユーザー認証など、セキュリティの基本を常に意識する</li>
                            <li><strong>Claude活用</strong>: 実装、デバッグ、最適化など各フェーズでAIアシスタントをフルに活用する</li>
                        </ul>
                        
                        <h4>次に学ぶべきトピック</h4>
                        <p>バックエンドの基本を理解したら、以下のトピックに進むことで、より本格的なWebサービスを構築できます。</p>
                        
                        <div class="feature-grid">
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(67, 97, 238, 0.1); color: #4361ee;">💾</div>
                                <h5 class="feature-title">高度なデータベース設計</h5>
                                <p>複雑なデータ関係のモデリング、クエリパフォーマンスの最適化、データ整合性の確保など、より高度なデータベース技術を学びます。</p>
                                <p><a href="database.html">データベース構築ガイドへ</a></p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(76, 201, 240, 0.1); color: #4cc9f0;">🔒</div>
                                <h5 class="feature-title">認証と権限管理</h5>
                                <p>多要素認証、ロールベースのアクセス制御、セッション管理など、より堅牢な認証システムと権限管理を学びます。</p>
                                <p><a href="authentication.html">認証・権限管理ガイドへ</a></p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(252, 163, 17, 0.1); color: #fca311;">🔄</div>
                                <h5 class="feature-title">サーバーレス応用</h5>
                                <p>トリガーベースの処理、バックグラウンドジョブ、ウェブフック連携など、サーバーレスアーキテクチャのより高度な活用方法を学びます。</p>
                                <p><a href="serverless.html">サーバーレス応用ガイドへ</a></p>
                            </div>
                            
                            <div class="feature-card">
                                <div class="feature-icon" style="background-color: rgba(247, 37, 133, 0.1); color: #f72585;">🚀</div>
                                <h5 class="feature-title">CI/CDと自動化</h5>
                                <p>継続的インテグレーション/デリバリー、自動テスト、自動デプロイなど、開発プロセスの自動化とスケーラブルな運用方法を学びます。</p>
                                <p><a href="cicd.html">CI/CD自動化ガイドへ</a></p>
                            </div>
                        </div>
                        
                        <div class="tip">
                            <h4>💡 最後のアドバイス</h4>
                            <p>バックエンド開発は一見複雑に見えますが、必要な知識を段階的に身につけていくことで、非エンジニアでも十分に実装可能です。特に初期段階では、完璧を目指すよりも、「動くものを作る」ことを優先し、徐々に改善していくアプローチが効果的です。Claudeを活用して、分からないことはどんどん質問しながら進めていきましょう。</p>
                        </div>
                    </section>
                </div>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>© 2025 AI駆動Web開発ポータル | Claude3.7活用ガイド</p>
                <div class="footer-links">
                    <a href="about.html">このサイトについて</a>
                    <a href="contact.html">お問い合わせ</a>
                    <a href="resources.html">参考リソース</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ナビゲーションのアクティブ状態
            const currentLocation = location.href;
            const navLinks = document.querySelectorAll('nav a');
            navLinks.forEach(link => {
                if(link.href === currentLocation) {
                    link.classList.add('active');
                }
            });
            
            // サイドバーのナビゲーション
            const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // スクロール検出とアクティブセクションのハイライト
            const sections = document.querySelectorAll('.content-section');
            window.addEventListener('scroll', function() {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if(pageYOffset >= (sectionTop - 200)) {
                        current = section.getAttribute('id');
                    }
                });
                
                sidebarLinks.forEach(link => {
                    link.classList.remove('active');
                    if(link.getAttribute('href') === `#${current}`) {
                        link.classList.add('active');
                    }
                });
            });
        });
    </script>
</body>
</html>
